{
  "checkpoint": {
    "checkpointId": "cp_20260126140213",
    "timestamp": "2026-01-26T14:02:13.163Z",
    "modifiedFiles": [
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\server.js",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\routes\\auth.js",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\privacy-security.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\password-setup.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\forgotpassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\forgotpassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\password-setup.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\components\\auth\\ForgotPassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\forgotpassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\FLOW_IMPLEMENTATION.md",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-shops-backend\\inventory.js",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\set-password.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\otpScreen.jsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\changepassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\contexts\\AuthContext.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\admin-backend\\apps\\admin-backend\\emailserver.js",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\contexts\\SettingsContext.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\admin-backend\\apps\\admin-backend\\notifications.js",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\changepassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\changepassword.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\pages\\Verification.tsx",
      "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\models\\User.js"
    ],
    "diffHash": "sha256:2d53ed13",
    "rollbackCommand": "bytecoder rollback cp_20260126140213",
    "description": "Pipeline execution checkpoint"
  },
  "snapshots": {
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\server.js": "import express from 'express';\r\nimport mongoose from 'mongoose';\r\nimport multer from 'multer';\r\nimport cors from 'cors';\r\nimport dotenv from 'dotenv';\r\nimport path from 'path';\r\nimport fs from 'fs';\r\nimport { fileURLToPath } from 'url';\r\nimport authRoutes from './routes/auth.js';\r\nimport reqtoolRoutes from './routes/reqtool.js';\r\n//import skillsRoutes from './routes/skills.js';\r\n\r\ndotenv.config();\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 5004;\r\n\r\n// 1Ô∏è‚É£ Create uploads folder if missing\r\nconst uploadDir = path.join(__dirname, 'uploads');\r\nif (!fs.existsSync(uploadDir)) fs.mkdirSync(uploadDir, { recursive: true });\r\n\r\n// 2Ô∏è‚É£ DB Connection\r\nmongoose.connect(process.env.MONGO_URI || \"mongodb://127.0.0.1:27017/serviceProviderDB\")\r\n  .then(() => console.log('‚úÖ MongoDB connected'))\r\n  .catch(err => console.error('‚ùå DB Connection error:', err));\r\n\r\n// 3Ô∏è‚É£ Middleware\r\napp.use(cors());\r\n\r\n// Only parse JSON for non-multipart requests\r\napp.use(express.json({ \r\n  limit: '50mb'\r\n}));\r\napp.use(express.urlencoded({ extended: true, limit: '50mb' }));\r\napp.use('/uploads', express.static(uploadDir));\r\n//app.use('/api', skillsRoutes);\r\n\r\n// 4Ô∏è‚É£ Multer\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => cb(null, 'uploads/'),\r\n  filename: (req, file, cb) => {\r\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\r\n    cb(null, `${file.fieldname}-${uniqueSuffix}${path.extname(file.originalname)}`);\r\n  }\r\n});\r\nconst upload = multer({ storage, limits: { fileSize: 5 * 1024 * 1024 } });\r\n\r\n// 5Ô∏è‚É£ Test Route\r\napp.get('/', (req, res) => res.send('Backend Running üöÄ'));\r\n\r\n// 6Ô∏è‚É£ Routes (multer is handled inside authRoutes)\r\napp.use('/api', authRoutes);\r\napp.use('/api/reqtool', reqtoolRoutes);\r\n\r\n// Error handling middleware for multer\r\napp.use((err, req, res, next) => {\r\n  if (err.code === 'LIMIT_FILE_SIZE') {\r\n    return res.status(400).json({ success: false, message: 'File too large' });\r\n  }\r\n  if (err.code === 'LIMIT_PART_COUNT') {\r\n    return res.status(400).json({ success: false, message: 'Too many files' });\r\n  }\r\n  if (err instanceof SyntaxError && err.status === 400 && 'body' in err) {\r\n    return res.status(400).json({ success: false, message: 'Invalid request body' });\r\n  }\r\n  console.error('Error:', err);\r\n  res.status(500).json({ success: false, message: 'Server error: ' + err.message });\r\n});\r\n\r\n// 7Ô∏è‚É£ Start server\r\napp.listen(PORT, () => {\r\n  console.log(`üöÄ Server running on http://localhost:${PORT}`);\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\routes\\auth.js": "import express from 'express';\r\nimport multer from 'multer';\r\nimport bcrypt from 'bcryptjs';\r\nimport path from 'path';\r\nimport Provider from '../models/Provider.js';\r\nimport Help from '../models/Help.js';\r\nimport FAQ from '../models/FAQ.js';\r\n\r\nconst router = express.Router();\r\n\r\n// ---------------------\r\n// Multer Setup for File Uploads\r\n// ---------------------\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => cb(null, 'uploads/'),\r\n  filename: (req, file, cb) => cb(null, Date.now() + '-' + Math.random().toString(36).substr(2, 9) + path.extname(file.originalname))\r\n});\r\n\r\nconst upload = multer({ \r\n  storage,\r\n  limits: {\r\n    fileSize: 10 * 1024 * 1024, // 10MB\r\n    files: 4,\r\n    fields: 10\r\n  }\r\n});\r\n\r\n// Configure upload fields\r\nconst uploadFields = upload.fields([\r\n  { name: 'profilePhoto', maxCount: 1 },\r\n  { name: 'cnicFront', maxCount: 1 },\r\n  { name: 'cnicBack', maxCount: 1 },\r\n  { name: 'criminalClearance', maxCount: 1 }\r\n]);\r\n\r\n// Wrapper for multer error handling\r\nconst uploadWithErrorHandling = (req, res, next) => {\r\n  console.log('üì® Incoming request to /signup');\r\n  console.log('  Content-Type:', req.headers['content-type']);\r\n  console.log('  Content-Length:', req.headers['content-length']);\r\n  \r\n  uploadFields(req, res, (err) => {\r\n    if (err) {\r\n      console.error('Multer error:', err.message);\r\n      console.error('   Stack:', err.stack?.split('\\n').slice(0, 3).join(' '));\r\n      if (err.code === 'LIMIT_FILE_SIZE') {\r\n        return res.status(400).json({ success: false, message: 'File too large' });\r\n      }\r\n      if (err.code === 'LIMIT_FILE_COUNT') {\r\n        return res.status(400).json({ success: false, message: 'Too many files' });\r\n      }\r\n      return res.status(400).json({ success: false, message: 'Upload error: ' + err.message });\r\n    }\r\n    next();\r\n  });\r\n};\r\n\r\n// ---------------------\r\n// Signup Route with Error Handler\r\n// ---------------------\r\nrouter.post('/signup', uploadWithErrorHandling, async (req, res) => {\r\n  try {\r\n    const { name, email, contactNumber, cnicNumber, password } = req.body;\r\n    const files = req.files;\r\n\r\n    console.log('--- New Signup Request ---');\r\n    console.log('Body fields:', { name, email, contactNumber, cnicNumber, password: password ? 'provided' : 'missing' });\r\n    console.log('Files received:', files ? Object.keys(files) : 'none');\r\n    if (files) {\r\n      Object.keys(files).forEach(key => {\r\n        console.log(`  ${key}: ${files[key][0].size} bytes - ${files[key][0].filename}`);\r\n      });\r\n    }\r\n\r\n    //  Validate text fields\r\n    if (!name || !email || !contactNumber || !cnicNumber || !password) {\r\n      console.error(' Missing required fields:', { name: !!name, email: !!email, contactNumber: !!contactNumber, cnicNumber: !!cnicNumber, password: !!password });\r\n      return res.status(400).json({ success: false, message: 'All text fields are required' });\r\n    }\r\n\r\n    //  Validate required images\r\n    if (!files || !files.profilePhoto || !files.cnicFront || !files.cnicBack) {\r\n      console.error(' Missing required images. Files received:', files ? Object.keys(files) : 'none');\r\n      return res.status(400).json({ success: false, message: 'Profile photo, CNIC front/back are required' });\r\n    }\r\n\r\n    //  Check duplicate email\r\n    const existing = await Provider.findOne({ email: email.toLowerCase().trim() });\r\n    if (existing) {\r\n      console.error(' Email already registered:', email);\r\n      return res.status(409).json({ success: false, message: 'Email already registered' });\r\n    }\r\n\r\n    //  Hash password and create Provider\r\n    try {\r\n      const salt = await bcrypt.genSalt(10);\r\n      const hashed = await bcrypt.hash(password, salt);\r\n\r\n      // Safely extract file paths\r\n      const profilePhotoPath = files.profilePhoto && files.profilePhoto[0] ? (files.profilePhoto[0].path || files.profilePhoto[0].filename) : '';\r\n      const cnicFrontPath = files.cnicFront && files.cnicFront[0] ? (files.cnicFront[0].path || files.cnicFront[0].filename) : '';\r\n      const cnicBackPath = files.cnicBack && files.cnicBack[0] ? (files.cnicBack[0].path || files.cnicBack[0].filename) : '';\r\n      const criminalClearancePath = files.criminalClearance && files.criminalClearance[0] ? (files.criminalClearance[0].path || files.criminalClearance[0].filename) : '';\r\n\r\n      console.log('File paths extracted:', { profilePhotoPath, cnicFrontPath, cnicBackPath, criminalClearancePath });\r\n\r\n      const newProvider = new Provider({\r\n        name,\r\n        email: email.toLowerCase().trim(),\r\n        contactNumber,\r\n        cnicNumber,\r\n        password: hashed,\r\n        profilePhoto: profilePhotoPath,\r\n        cnicFront: cnicFrontPath,\r\n        cnicBack: cnicBackPath,\r\n        criminalClearance: criminalClearancePath,\r\n        skills: {} // Initialize empty skills object\r\n      });\r\n\r\n      await newProvider.save();\r\n\r\n      console.log('Provider saved:', newProvider._id);\r\n\r\n      res.status(201).json({\r\n        success: true,\r\n        message: 'Signup successful',\r\n        providerId: newProvider._id,\r\n        email: newProvider.email\r\n      });\r\n    } catch (hashErr) {\r\n      console.error(' Error during password hashing or save:', hashErr.message);\r\n      console.error(' Error stack:', hashErr.stack);\r\n      return res.status(500).json({ success: false, message: 'Error creating account: ' + hashErr.message });\r\n    }\r\n  } catch (err) {\r\n    console.error('SERVER ERROR :', err.message);\r\n    console.error('Stack trace:', err.stack);\r\n    res.status(500).json({ success: false, message: 'Internal server error: ' + err.message });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Update Skills Route\r\n// ---------------------\r\nrouter.post('/update-skills', async (req, res) => {\r\n  try {\r\n    const { email, skills } = req.body;\r\n\r\n    if (!email || !skills) {\r\n      return res.status(400).json({ success: false, message: 'Email and skills are required' });\r\n    }\r\n\r\n    // Find provider by email\r\n    const provider = await Provider.findOne({ email });\r\n\r\n    if (!provider) {\r\n      return res.status(404).json({ success: false, message: 'Provider not found' });\r\n    }\r\n\r\n    // Transform skills array to object format for easier display\r\n    // Input: [{category: 'Electrical', subcategories: ['Wiring', 'Lights']}, ...]\r\n    // Output: {Electrical: ['Wiring', 'Lights'], ...}\r\n    const skillsObject = {};\r\n    if (Array.isArray(skills)) {\r\n      skills.forEach(skill => {\r\n        if (skill.category && skill.subcategories) {\r\n          skillsObject[skill.category] = skill.subcategories;\r\n        }\r\n      });\r\n    } else {\r\n      // If already an object, use as is\r\n      Object.assign(skillsObject, skills);\r\n    }\r\n\r\n    // Update skills\r\n    provider.skills = skillsObject;\r\n    await provider.save();\r\n\r\n    console.log(` Skills updated for ${email}:`, skillsObject);\r\n\r\n    res.status(200).json({ success: true, message: 'Skills updated successfully' });\r\n\r\n  } catch (err) {\r\n    console.error('Error updating skills:', err);\r\n    res.status(500).json({ success: false, message: 'Server error while updating skills' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Login Route\r\n// ---------------------\r\nrouter.post('/login', async (req, res) => {\r\n  try {\r\n    const { email, password } = req.body;\r\n    if (!email || !password) return res.status(400).json({ success: false, message: 'Email and password required' });\r\n\r\n    const provider = await Provider.findOne({ email });\r\n    if (!provider) return res.status(404).json({ success: false, message: 'Provider not found' });\r\n\r\n    const match = await bcrypt.compare(password, provider.password);\r\n    if (!match) return res.status(401).json({ success: false, message: 'Invalid credentials' });\r\n\r\n    // Return minimal provider info\r\n    const out = {\r\n      id: provider._id,\r\n      name: provider.name,\r\n      email: provider.email,\r\n      isComplete: provider.isComplete\r\n    };\r\n\r\n    res.status(200).json({ success: true, provider: out });\r\n  } catch (err) {\r\n    console.error('Login error:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Upload Certifications Route\r\n// ---------------------\r\nrouter.post('/update-certifications', upload.array('certifications', 6), async (req, res) => {\r\n  try {\r\n    const { email } = req.body;\r\n    if (!email) return res.status(400).json({ success: false, message: 'Email required' });\r\n\r\n    const provider = await Provider.findOne({ email });\r\n    if (!provider) return res.status(404).json({ success: false, message: 'Provider not found' });\r\n\r\n    const files = req.files || [];\r\n    const filenames = files.map(f => f.path || f.filename);\r\n\r\n    // Append or set certifications\r\n    provider.certifications = provider.certifications ? provider.certifications.concat(filenames) : filenames;\r\n    await provider.save();\r\n\r\n    res.status(200).json({ success: true, message: 'Certifications uploaded' });\r\n  } catch (err) {\r\n    console.error('Error uploading certifications:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Finalize Registration\r\n// ---------------------\r\nrouter.post('/finalize-registration', async (req, res) => {\r\n  try {\r\n    const { email } = req.body;\r\n    if (!email) return res.status(400).json({ success: false, message: 'Email required' });\r\n\r\n    const provider = await Provider.findOne({ email });\r\n    if (!provider) return res.status(404).json({ success: false, message: 'Provider not found' });\r\n\r\n    provider.isComplete = true;\r\n    await provider.save();\r\n\r\n    res.status(200).json({ success: true, message: 'Registration completed' });\r\n  } catch (err) {\r\n    console.error('Error finalizing registration:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Get Provider Profile Data\r\n// ---------------------\r\nrouter.get('/get-provider', async (req, res) => {\r\n  try {\r\n    const { email } = req.query;\r\n    if (!email) return res.status(400).json({ success: false, message: 'Email required' });\r\n\r\n    const provider = await Provider.findOne({ email: email.toLowerCase().trim() });\r\n    if (!provider) return res.status(404).json({ success: false, message: 'Provider not found' });\r\n\r\n    res.status(200).json({ \r\n      success: true, \r\n      provider: {\r\n        _id: provider._id,\r\n        name: provider.name,\r\n        email: provider.email,\r\n        contactNumber: provider.contactNumber,\r\n        skills: provider.skills || {},\r\n        certifications: provider.certifications || [],\r\n        profilePhoto: provider.profilePhoto\r\n      }\r\n    });\r\n  } catch (err) {\r\n    console.error('Error fetching provider:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// DEVELOPMENT: Reset Database\r\n// ---------------------\r\nrouter.post('/dev/reset-database', async (req, res) => {\r\n  try {\r\n    const deletedCount = await Provider.deleteMany({});\r\n    console.log(` Database reset - Deleted ${deletedCount.deletedCount} providers`);\r\n    res.status(200).json({ \r\n      success: true, \r\n      message: 'Database reset successfully', \r\n      deletedCount: deletedCount.deletedCount \r\n    });\r\n  } catch (err) {\r\n    console.error('Error resetting database:', err);\r\n    res.status(500).json({ success: false, message: 'Error resetting database: ' + err.message });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Submit Help/Support Request\r\n// ---------------------\r\nrouter.post('/submit-help-request', async (req, res) => {\r\n  try {\r\n    const { email, subject, reason, explanation, timestamp } = req.body;\r\n\r\n    // Validation\r\n    if (!email || !subject || !reason || !explanation) {\r\n      return res.status(400).json({ \r\n        success: false, \r\n        message: 'Email, subject, reason, and explanation are required' \r\n      });\r\n    }\r\n\r\n    // Check if provider exists\r\n    const provider = await Provider.findOne({ email: email.toLowerCase().trim() });\r\n    if (!provider) {\r\n      return res.status(404).json({ success: false, message: 'Provider not found' });\r\n    }\r\n\r\n    // Create help request\r\n    const helpRequest = new Help({\r\n      email: email.toLowerCase().trim(),\r\n      subject: subject.trim(),\r\n      reason: reason,\r\n      explanation: explanation.trim(),\r\n      status: 'open',\r\n      createdAt: timestamp || new Date()\r\n    });\r\n\r\n    await helpRequest.save();\r\n\r\n    console.log(` Help request submitted by ${email}:`, {\r\n      subject,\r\n      reason,\r\n      status: 'open'\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Help request submitted successfully',\r\n      requestId: helpRequest._id\r\n    });\r\n  } catch (err) {\r\n    console.error('Error submitting help request:', err);\r\n    res.status(500).json({ success: false, message: 'Server error: ' + err.message });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Get Help Requests for a Provider\r\n// ---------------------\r\nrouter.get('/get-help-requests', async (req, res) => {\r\n  try {\r\n    const { email } = req.query;\r\n\r\n    if (!email) {\r\n      return res.status(400).json({ success: false, message: 'Email required' });\r\n    }\r\n\r\n    const requests = await Help.find({ email: email.toLowerCase().trim() })\r\n      .sort({ createdAt: -1 });\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      requests: requests\r\n    });\r\n  } catch (err) {\r\n    console.error('Error fetching help requests:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Submit FAQ Question\r\n// ---------------------\r\nrouter.post('/submit-faq-question', async (req, res) => {\r\n  try {\r\n    const { email, subject, question } = req.body;\r\n\r\n    // Validation\r\n    if (!email || !subject || !question) {\r\n      return res.status(400).json({ \r\n        success: false, \r\n        message: 'Email, subject, and question are required' \r\n      });\r\n    }\r\n\r\n    // Check if provider exists\r\n    const provider = await Provider.findOne({ email: email.toLowerCase().trim() });\r\n    if (!provider) {\r\n      return res.status(404).json({ success: false, message: 'Provider not found' });\r\n    }\r\n\r\n    // Create FAQ question\r\n    const faqQuestion = new FAQ({\r\n      email: email.toLowerCase().trim(),\r\n      subject: subject.trim(),\r\n      question: question.trim(),\r\n      status: 'pending',\r\n      createdAt: new Date()\r\n    });\r\n\r\n    await faqQuestion.save();\r\n\r\n    console.log(` FAQ question submitted by ${email}:`, {\r\n      subject,\r\n      status: 'pending'\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: 'Question submitted successfully',\r\n      questionId: faqQuestion._id\r\n    });\r\n  } catch (err) {\r\n    console.error('Error submitting FAQ question:', err);\r\n    res.status(500).json({ success: false, message: 'Server error: ' + err.message });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Get User's FAQ Questions\r\n// ---------------------\r\nrouter.get('/get-faq-questions', async (req, res) => {\r\n  try {\r\n    const { email } = req.query;\r\n\r\n    if (!email) {\r\n      return res.status(400).json({ success: false, message: 'Email required' });\r\n    }\r\n\r\n    const questions = await FAQ.find({ email: email.toLowerCase().trim() })\r\n      .sort({ createdAt: -1 });\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      questions: questions\r\n    });\r\n  } catch (err) {\r\n    console.error('Error fetching FAQ questions:', err);\r\n    res.status(500).json({ success: false, message: 'Server error' });\r\n  }\r\n});\r\n\r\n// ---------------------\r\n// Update User Location\r\n// ---------------------\r\nrouter.post('/update-location', async (req, res) => {\r\n  try {\r\n    const { email, location } = req.body;\r\n\r\n    if (!email || !location) {\r\n      return res.status(400).json({ success: false, message: 'Email and location are required' });\r\n    }\r\n\r\n    const provider = await Provider.findOne({ email: email.toLowerCase().trim() });\r\n    if (!provider) {\r\n      return res.status(404).json({ success: false, message: 'Provider not found' });\r\n    }\r\n\r\n    provider.location = location.trim();\r\n    await provider.save();\r\n\r\n    console.log(` Location updated for ${email}: ${location}`);\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      message: 'Location updated successfully',\r\n      location: provider.location\r\n    });\r\n  } catch (err) {\r\n    console.error('Error updating location:', err);\r\n    res.status(500).json({ success: false, message: 'Server error: ' + err.message });\r\n  }\r\n});\r\n\r\n// router.post('/send-otp', async (req, res) => {\r\n//   try {\r\n//     const inputEmail = req.body.email?.toLowerCase().trim();\r\n//     if (!inputEmail) {\r\n//       return res.status(400).json({ message: 'Email is required' });\r\n//     }\r\n\r\n//     const provider = await Provider.findOne({ email: inputEmail });\r\n//     if (!provider) {\r\n//       return res.status(404).json({ message: 'Provider not found' });\r\n//     }\r\n\r\n//     const dbEmail = provider.email; // ‚úÖ email from DB only\r\n\r\n//     const otp = Math.floor(100000 + Math.random() * 900000).toString();\r\n//     provider.otp = otp;\r\n//     provider.otpExpiry = Date.now() + 10 * 60 * 1000;\r\n//     provider.otpVerified = false;\r\n//     await provider.save();\r\n\r\n//     const transporter = nodemailer.createTransport({\r\n//       service: 'gmail',\r\n//       auth: {\r\n//         user: process.env.GMAIL_USER,\r\n//         pass: process.env.GMAIL_PASS,\r\n//       },\r\n//     });\r\n\r\n//     await transporter.sendMail({\r\n//       from: `\"Nexora Support\" <${process.env.GMAIL_USER}>`,\r\n//       to: dbEmail,\r\n//       subject: 'Your OTP Code',\r\n//       html: `\r\n//         <h2>Account Verification</h2>\r\n//         <h1>${otp}</h1>\r\n//         <p>This OTP expires in 10 minutes.</p>\r\n//       `,\r\n//     });\r\n\r\n//     console.log('‚úÖ OTP sent to:', dbEmail);\r\n\r\n//     res.status(200).json({ message: 'OTP sent successfully' });\r\n//   } catch (err) {\r\n//     console.error(err);\r\n//     res.status(500).json({ message: 'Server error' });\r\n//   }\r\n// });\r\nrouter.post('/send-otp', async (req, res, next) => {\r\n  try {\r\n    console.log('Request body:', req.body);\r\n\r\n    const { email } = req.body;\r\n    if (!email) {\r\n      return res.status(400).json({ success: false, message: 'Email is required' });\r\n    }\r\n\r\n    // Generate OTP\r\n    const otpCode = generateOTP();\r\n    console.log('Generated OTP:', otpCode);\r\n\r\n    // Optional: Save OTP to database\r\n    if (mongoose.connection.readyState === 1) { // ensure DB connected\r\n      await OTP.create({ email, code: otpCode, createdAt: new Date() });\r\n      console.log('OTP saved to DB for:', email);\r\n    }\r\n\r\n    // Optional: Send OTP via email (example using nodemailer)\r\n    /*\r\n    const transporter = nodemailer.createTransport({\r\n      service: 'gmail',\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASS\r\n      }\r\n    });\r\n\r\n    await transporter.sendMail({\r\n      from: process.env.EMAIL_USER,\r\n      to: email,\r\n      subject: 'Your OTP Code',\r\n      text: `Your OTP is ${otpCode}`\r\n    });\r\n    console.log('OTP email sent to:', email);\r\n    */\r\n\r\n    return res.json({ success: true, message: 'OTP sent successfully', otp: otpCode }); // remove otp in production\r\n\r\n  } catch (err) {\r\n    console.error('Error in /send-otp:', err);\r\n    next(err); // pass to your existing error middleware\r\n  }\r\n});\r\nrouter.post('/verify-otp', async (req, res) => {\r\n  try {\r\n    const email = req.body.email?.toLowerCase().trim();\r\n    const { otp } = req.body;\r\n\r\n    if (!email || !otp) {\r\n      return res.status(400).json({ message: 'Email and OTP required' });\r\n    }\r\n\r\n    const provider = await Provider.findOne({ email });\r\n    if (!provider) {\r\n      return res.status(404).json({ message: 'Provider not found' });\r\n    }\r\n\r\n    if (!provider.otp || provider.otpExpiry < Date.now()) {\r\n      return res.status(400).json({ message: 'OTP expired' });\r\n    }\r\n\r\n    if (provider.otp !== otp) {\r\n      return res.status(401).json({ message: 'Invalid OTP' });\r\n    }\r\n\r\n    provider.otp = null;\r\n    provider.otpExpiry = null;\r\n    provider.otpVerified = true;\r\n    await provider.save();\r\n\r\n    res.status(200).json({ message: 'OTP verified successfully' });\r\n  } catch (err) {\r\n    res.status(500).json({ message: 'Server error' });\r\n  }\r\n});\r\nrouter.post('/change-password', async (req, res) => {\r\n  try {\r\n    const email = req.body.email?.toLowerCase().trim();\r\n    const { newPassword } = req.body;\r\n\r\n    if (!email || !newPassword) {\r\n      return res.status(400).json({ message: 'Email and password required' });\r\n    }\r\n\r\n    const provider = await Provider.findOne({ email });\r\n    if (!provider) {\r\n      return res.status(404).json({ message: 'Provider not found' });\r\n    }\r\n\r\n    if (!provider.otpVerified) {\r\n      return res.status(401).json({ message: 'Verify OTP first' });\r\n    }\r\n\r\n    provider.password = await bcrypt.hash(newPassword, 10);\r\n    provider.otpVerified = false;\r\n    await provider.save();\r\n\r\n    res.status(200).json({ message: 'Password changed successfully' });\r\n  } catch (err) {\r\n    res.status(500).json({ message: 'Server error' });\r\n  }\r\n});\r\nexport default router;",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\privacy-security.tsx": "import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  SafeAreaView,\r\n} from 'react-native';\r\nimport { ArrowLeft, FileText, Shield } from 'lucide-react-native';\r\nimport { useRouter } from 'expo-router';\r\n\r\nexport default function HelpSupportScreen() {\r\n  const router = useRouter();\r\n  const [activeTab, setActiveTab] = useState<'terms' | 'privacy'>('terms');\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeArea}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <TouchableOpacity onPress={() => router.back()} style={styles.backButton}>\r\n          <ArrowLeft size={24} color=\"#fff\" />\r\n        </TouchableOpacity>\r\n        <Text style={styles.headerTitle}>Privacy & Security</Text>\r\n        <View style={{ width: 40 }} />\r\n      </View>\r\n\r\n      {/* Tabs */}\r\n      <View style={styles.tabContainer}>\r\n        <TouchableOpacity\r\n          style={[styles.tabButton, activeTab === 'terms' && styles.activeTab]}\r\n          onPress={() => setActiveTab('terms')}\r\n        >\r\n          <Text style={[styles.tabText, activeTab === 'terms' && styles.activeTabText]}>\r\n            Terms & Conditions\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.tabButton, activeTab === 'privacy' && styles.activeTab]}\r\n          onPress={() => setActiveTab('privacy')}\r\n        >\r\n          <Text style={[styles.tabText, activeTab === 'privacy' && styles.activeTabText]}>\r\n            Privacy Policy\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {/* Content */}\r\n      <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>\r\n        {activeTab === 'terms' ? (\r\n          <>\r\n            <View style={styles.iconContainer}>\r\n              <FileText size={48} color=\"#05f51d\" />\r\n              <Text style={styles.lastUpdated}>Last updated: January 2024</Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>1. Acceptance of Terms</Text>\r\n              <Text style={styles.sectionText}>\r\n                By accessing and using ServicePro, you accept and agree to be bound by these\r\n                terms. If you do not agree, please do not use this service.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>2. Service Shops Responsibilities</Text>\r\n              <Text style={styles.sectionText}>\r\n                ‚Ä¢ Provide accurate information about your skills{'\\n'}‚Ä¢ Complete jobs\r\n                professionally and on time{'\\n'}‚Ä¢ Maintain valid licenses and certifications{'\\n'}\r\n                ‚Ä¢ Communicate respectfully with customers{'\\n'}‚Ä¢ Follow safety guidelines and local laws\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>3. Payment Terms</Text>\r\n              <Text style={styles.sectionText}>\r\n                ServicePro facilitates payments between customers and service Shopss. Payment\r\n                processing fees may apply. Shopss are responsible for their tax obligations.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>4. Account Termination</Text>\r\n              <Text style={styles.sectionText}>\r\n                We may suspend or terminate accounts that violate terms, engage in fraud, or\r\n                receive poor ratings. You may close your account anytime.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>5. Contact</Text>\r\n              <Text style={styles.sectionText}>\r\n                Email: legal@servicepro.com{'\\n'}Phone: +92 300 1234567{'\\n'}Address: Lahore, Pakistan\r\n              </Text>\r\n            </View>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <View style={styles.iconContainer}>\r\n              <Shield size={48} color=\"#05f51d\" />\r\n              <Text style={styles.lastUpdated}>Last updated: January 2024</Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>1. Information We Collect</Text>\r\n              <Text style={styles.sectionText}>\r\n                We collect details such as your name, email, phone, and preferences when you\r\n                create an account or contact support.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>2. How We Use It</Text>\r\n              <Text style={styles.sectionText}>\r\n                To provide and improve our services, process transactions, and communicate with\r\n                you about updates or promotions.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>3. Data Security</Text>\r\n              <Text style={styles.sectionText}>\r\n                We use strong encryption and security measures to protect your data, though no\r\n                system is completely immune from breaches.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>4. Your Rights</Text>\r\n              <Text style={styles.sectionText}>\r\n                You may request to access, modify, or delete your personal data by contacting\r\n                us at support@servicepro.com.\r\n              </Text>\r\n            </View>\r\n\r\n            <View style={styles.section}>\r\n              <Text style={styles.sectionTitle}>5. Contact Us</Text>\r\n              <Text style={styles.sectionText}>\r\n                Email: support@servicepro.com{'\\n'}Phone: +92 300 1234567{'\\n'}Address: Lahore, Pakistan\r\n              </Text>\r\n            </View>\r\n          </>\r\n        )}\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  safeArea: { flex: 1, backgroundColor: '#fff' },\r\n\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    backgroundColor: '#19034d',\r\n    paddingHorizontal: 20,\r\n    paddingTop: 50,\r\n    paddingBottom: 16,\r\n  },\r\n  backButton: { width: 40, height: 40, justifyContent: 'center', alignItems: 'center' },\r\n  headerTitle: { fontSize: 20, fontWeight: '700', color: '#fff' },\r\n\r\n  tabContainer: {\r\n    flexDirection: 'row',\r\n    backgroundColor: '#f1f1f1',\r\n    marginHorizontal: 20,\r\n    marginVertical: 16,\r\n    borderRadius: 10,\r\n  },\r\n  tabButton: { flex: 1, alignItems: 'center', paddingVertical: 10, borderRadius: 10 },\r\n  tabText: { color: '#555', fontSize: 15, fontWeight: '500' },\r\n  activeTab: { backgroundColor: '#05f51d' },\r\n  activeTabText: { color: '#19034d', fontWeight: '700' },\r\n\r\n  content: { paddingHorizontal: 20, paddingBottom: 30 },\r\n  iconContainer: { alignItems: 'center', marginBottom: 30 },\r\n  lastUpdated: { fontSize: 13, color: '#6B7280', marginTop: 10 },\r\n\r\n  section: { marginBottom: 20 },\r\n  sectionTitle: { fontSize: 17, fontWeight: '700', color: '#19034d', marginBottom: 8 },\r\n  sectionText: { fontSize: 14, color: '#444', lineHeight: 22 },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\password-setup.tsx": "import { useState } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert } from 'react-native';\r\nimport { router } from 'expo-router';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Eye, EyeOff } from 'lucide-react-native';\r\n\r\nexport default function PasswordSetup() {\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n\r\n  const handleSetupPassword = async () => {\r\n    if (!name || !email || !password || !confirmPassword) {\r\n      Alert.alert('Missing Information', 'Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      Alert.alert('Password Mismatch', 'Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      Alert.alert('Weak Password', 'Password must be at least 8 characters');\r\n      return;\r\n    }\r\n\r\n    await AsyncStorage.setItem('hasSetPassword', 'true');\r\n    await AsyncStorage.setItem('userCredentials', JSON.stringify({ name, email, password }));\r\n\r\n    router.replace('/onboarding');\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text style={styles.headerTitle}>Set Up Your Account</Text>\r\n        <Text style={styles.headerSubtitle}>Create your login credentials</Text>\r\n      </View>\r\n\r\n      <View style={styles.form}>\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Full Name</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={name}\r\n            onChangeText={setName}\r\n            placeholder=\"Enter your full name\"\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Email</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={email}\r\n            onChangeText={setEmail}\r\n            placeholder=\"Enter your email\"\r\n            keyboardType=\"email-address\"\r\n            autoCapitalize=\"none\"\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Password</Text>\r\n          <View style={styles.passwordContainer}>\r\n            <TextInput\r\n              style={styles.passwordInput}\r\n              value={password}\r\n              onChangeText={setPassword}\r\n              placeholder=\"Enter password (min 8 characters)\"\r\n              secureTextEntry={!showPassword}\r\n            />\r\n            <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\r\n              {showPassword ? (\r\n                <EyeOff size={20} color=\"#666\" />\r\n              ) : (\r\n                <Eye size={20} color=\"#666\" />\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n\r\n        <View style={styles.inputGroup}>\r\n          <Text style={styles.label}>Confirm Password</Text>\r\n          <View style={styles.passwordContainer}>\r\n            <TextInput\r\n              style={styles.passwordInput}\r\n              value={confirmPassword}\r\n              onChangeText={setConfirmPassword}\r\n              placeholder=\"Confirm your password\"\r\n              secureTextEntry={!showConfirmPassword}\r\n            />\r\n            <TouchableOpacity onPress={() => setShowConfirmPassword(!showConfirmPassword)}>\r\n              {showConfirmPassword ? (\r\n                <EyeOff size={20} color=\"#666\" />\r\n              ) : (\r\n                <Eye size={20} color=\"#666\" />\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n\r\n        <TouchableOpacity style={styles.continueButton} onPress={handleSetupPassword}>\r\n          <Text style={styles.continueButtonText}>Continue</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  header: {\r\n    backgroundColor: '#19034d',\r\n    paddingTop: 50,\r\n    paddingBottom: 20,\r\n    paddingHorizontal: 20,\r\n  },\r\n  headerTitle: {\r\n    fontSize: 22,\r\n    fontWeight: 'bold',\r\n    color: '#fff',\r\n  },\r\n  headerSubtitle: {\r\n    fontSize: 14,\r\n    color: '#ddd',\r\n    marginTop: 5,\r\n  },\r\n  form: {\r\n    padding: 20,\r\n  },\r\n  inputGroup: {\r\n    marginBottom: 20,\r\n  },\r\n  label: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    fontSize: 16,\r\n  },\r\n  passwordContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n  },\r\n  passwordInput: {\r\n    flex: 1,\r\n    fontSize: 16,\r\n  },\r\n  continueButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n  },\r\n  continueButtonText: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    color: '#19034d',\r\n  },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\forgotpassword.tsx": "import React, { useState } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport { ArrowLeft, Mail } from 'lucide-react-native';\r\n\r\nexport default function ForgotPassword() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n\r\n  const handleReset = () => {\r\n    if (!email.trim()) {\r\n      Alert.alert('Error', 'Please enter your email address.');\r\n      return;\r\n    }\r\n\r\n    // ‚úÖ Show success alert, then navigate after short delay\r\n    Alert.alert('Success', `Password reset link sent to ${email}`);\r\n    \r\n    // Small timeout ensures the Alert shows before navigating\r\n    setTimeout(() => {\r\n      router.push('/set-password');\r\n    }, 500);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (router.canGoBack()) {\r\n      router.back();\r\n    } else {\r\n      router.replace('/login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* üîô Back Button */}\r\n      <TouchableOpacity style={styles.backButton} onPress={handleBack}>\r\n        <ArrowLeft size={24} color=\"#19034d\" />\r\n      </TouchableOpacity>\r\n\r\n      {/* üß≠ Header */}\r\n      <Text style={styles.title}>Forgot Password</Text>\r\n      <Text style={styles.subtitle}>Enter your email to reset your password</Text>\r\n\r\n      {/* ‚úâÔ∏è Input Field */}\r\n      <View style={styles.inputGroup}>\r\n        <Mail size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Email Address\"\r\n          value={email}\r\n          onChangeText={setEmail}\r\n          keyboardType=\"email-address\"\r\n          autoCapitalize=\"none\"\r\n          placeholderTextColor=\"#999\"\r\n        />\r\n      </View>\r\n\r\n      {/* üîò Submit Button */}\r\n      <TouchableOpacity style={styles.resetButton} onPress={handleReset}>\r\n        <Text style={styles.resetButtonText}>Send Reset Link</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 24,\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    marginBottom: 24,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 14,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\forgotpassword.tsx": "import React, { useState } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport { ArrowLeft, Mail } from 'lucide-react-native';\r\n\r\nexport default function ForgotPassword() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n\r\n  const handleReset = () => {\r\n    if (!email.trim()) {\r\n      Alert.alert('Error', 'Please enter your email address.');\r\n      return;\r\n    }\r\n\r\n    //  Show success alert, then navigate after short delay\r\n    Alert.alert('Success', `Password reset link sent to ${email}`);\r\n    \r\n    // Small timeout ensures the Alert shows before navigating\r\n    setTimeout(() => {\r\n      router.push('/set-password');\r\n    }, 500);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (router.canGoBack()) {\r\n      router.back();\r\n    } else {\r\n      router.replace('/login');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/*  Back Button */}\r\n      <TouchableOpacity style={styles.backButton} onPress={handleBack}>\r\n        <ArrowLeft size={24} color=\"#19034d\" />\r\n      </TouchableOpacity>\r\n\r\n      {/*  Header */}\r\n      <Text style={styles.title}>Forgot Password</Text>\r\n      <Text style={styles.subtitle}>Enter your email to reset your password</Text>\r\n\r\n      {/*  Input Field */}\r\n      <View style={styles.inputGroup}>\r\n        <Mail size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Email Address\"\r\n          value={email}\r\n          onChangeText={setEmail}\r\n          keyboardType=\"email-address\"\r\n          autoCapitalize=\"none\"\r\n          placeholderTextColor=\"#999\"\r\n        />\r\n      </View>\r\n\r\n      {/*  Submit Button */}\r\n      <TouchableOpacity style={styles.resetButton} onPress={handleReset}>\r\n        <Text style={styles.resetButtonText}>Send Reset Link</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 24,\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    marginBottom: 24,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 14,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\password-setup.tsx": "import React, { useState, useEffect } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, Alert, ActivityIndicator } from 'react-native';\nimport { router } from 'expo-router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport axios from 'axios';\nimport { Eye, EyeOff, ArrowLeft, Mail } from 'lucide-react-native';\n\ntype Step = 'password' | 'otp' | 'verify';\n\n// ---------------------------\n// Use your PC IP instead of localhost\n// ---------------------------\nconst API = axios.create({\n  baseURL: 'http://192.168.18.20:5004/api', // ‚úÖ PC IP here\n  headers: { 'Content-Type': 'application/json' },\n});\n\nexport default function PasswordSetup() {\n  const [step, setStep] = useState<Step>('password');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [otp, setOtp] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [timer, setTimer] = useState(0);\n\n  // Load saved email from AsyncStorage\n  useEffect(() => {\n    const loadEmail = async () => {\n      try {\n        const savedEmail = await AsyncStorage.getItem('registrationEmail');\n        if (savedEmail) setEmail(savedEmail);\n      } catch (err) {\n        console.error('Error loading email:', err);\n      }\n    };\n    loadEmail();\n  }, []);\n\n  // OTP countdown timer\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (timer > 0) {\n      interval = setInterval(() => setTimer(t => t - 1), 1000);\n    }\n    return () => clearInterval(interval);\n  }, [timer]);\n\n  // ---------------------------\n  // Step 1: Send OTP\n  // ---------------------------\n  const handleSetPassword = async () => {\n    if (!email) return Alert.alert('Error', 'Email not found. Please start registration.');\n    if (!password || !confirmPassword) return Alert.alert('Error', 'Fill all password fields');\n    if (password !== confirmPassword) return Alert.alert('Error', 'Passwords do not match');\n    if (password.length < 6) return Alert.alert('Error', 'Password must be at least 6 characters');\n\n    setLoading(true);\n    try {\n      await API.post('/send-otp', { email });\n      Alert.alert('Success', 'OTP has been sent to your email.');\n      setStep('otp');\n      setTimer(600); // 10 minutes\n    } catch (err: any) {\n      console.error('Error sending OTP:', err);\n      Alert.alert('Error', err.response?.data?.message || 'Failed to send OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------------------------\n  // Step 2: Verify OTP\n  // ---------------------------\n  const handleVerifyOtp = async () => {\n    if (!otp) return Alert.alert('Error', 'Enter OTP');\n\n    setLoading(true);\n    try {\n      await API.post('/verify-otp', { email, otp });\n      setStep('verify');\n    } catch (err: any) {\n      console.error('Error verifying OTP:', err);\n      Alert.alert('Error', err.response?.data?.message || 'Invalid OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------------------------\n  // Step 3: Change password\n  // ---------------------------\n  const handleChangePassword = async () => {\n    setLoading(true);\n    try {\n      await API.post('/change-password', { email, newPassword: password });\n\n      await AsyncStorage.setItem('hasSetPassword', 'true');\n      await AsyncStorage.setItem('userCredentials', JSON.stringify({ email, password }));\n      \n      Alert.alert('Success', 'Password set successfully!', [\n        {\n          text: 'OK',\n          onPress: async () => {\n            await AsyncStorage.removeItem('registrationEmail');\n            router.replace('/login');\n          }\n        }\n      ]);\n    } catch (err: any) {\n      console.error('Error changing password:', err);\n      Alert.alert('Error', err.response?.data?.message || 'Failed to set password');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------------------------\n  // Resend OTP\n  // ---------------------------\n  const handleResendOtp = async () => {\n    if (timer > 0) return;\n\n    setLoading(true);\n    try {\n      await API.post('/send-otp', { email });\n      Alert.alert('Success', 'OTP resent to your email');\n      setTimer(600);\n    } catch (err: any) {\n      Alert.alert('Error', 'Failed to resend OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ---------------------------\n  // UI\n  // ---------------------------\n  return (\n    <View style={styles.container}>\n      {/* Back button */}\n      {step === 'password' && (\n        <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\n          <ArrowLeft size={24} color=\"#19034d\" />\n        </TouchableOpacity>\n      )}\n\n      {/* Header */}\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>\n          {step === 'password' ? 'Set Up Your Password' : step === 'otp' ? 'Verify Email' : 'Account Created'}\n        </Text>\n        <Text style={styles.headerSubtitle}>\n          {step === 'password' ? 'Create a strong password for your account' : step === 'otp' ? \"We've sent an OTP to your email\" : 'Your password has been set successfully'}\n        </Text>\n      </View>\n\n      <View style={styles.form}>\n        {/* Password Setup */}\n        {step === 'password' && (\n          <>\n            <View style={styles.inputGroup}>\n              <Text style={styles.label}>Email</Text>\n              <TextInput style={[styles.input, { backgroundColor: '#f5f5f5' }]} value={email} editable={false} />\n            </View>\n\n            <View style={styles.inputGroup}>\n              <Text style={styles.label}>New Password</Text>\n              <View style={styles.passwordContainer}>\n                <TextInput style={styles.passwordInput} value={password} onChangeText={setPassword} placeholder=\"Enter password\" secureTextEntry={!showPassword} placeholderTextColor=\"#999\" />\n                <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\n                  {showPassword ? <EyeOff size={20} color=\"#666\" /> : <Eye size={20} color=\"#666\" />}\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            <View style={styles.inputGroup}>\n              <Text style={styles.label}>Confirm Password</Text>\n              <View style={styles.passwordContainer}>\n                <TextInput style={styles.passwordInput} value={confirmPassword} onChangeText={setConfirmPassword} placeholder=\"Confirm password\" secureTextEntry={!showConfirmPassword} placeholderTextColor=\"#999\" />\n                <TouchableOpacity onPress={() => setShowConfirmPassword(!showConfirmPassword)}>\n                  {showConfirmPassword ? <EyeOff size={20} color=\"#666\" /> : <Eye size={20} color=\"#666\" />}\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            <TouchableOpacity style={[styles.continueButton, loading && { opacity: 0.7 }]} onPress={handleSetPassword} disabled={loading}>\n              {loading ? <ActivityIndicator color=\"#19034d\" /> : <Text style={styles.continueButtonText}>Continue to OTP</Text>}\n            </TouchableOpacity>\n          </>\n        )}\n\n        {/* OTP Verification */}\n        {step === 'otp' && (\n          <>\n            <View style={styles.emailDisplay}>\n              <Mail size={20} color=\"#19034d\" />\n              <Text style={styles.emailText}>{email}</Text>\n            </View>\n            <Text style={styles.otpLabel}>Enter OTP</Text>\n            <TextInput style={styles.otpInput} placeholder=\"000000\" value={otp} onChangeText={setOtp} keyboardType=\"number-pad\" maxLength={6} placeholderTextColor=\"#ccc\" />\n            <TouchableOpacity style={[styles.continueButton, loading && { opacity: 0.7 }]} onPress={handleVerifyOtp} disabled={loading}>\n              {loading ? <ActivityIndicator color=\"#19034d\" /> : <Text style={styles.continueButtonText}>Verify OTP</Text>}\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.resendButton} onPress={handleResendOtp} disabled={timer > 0}>\n              <Text style={[styles.resendText, timer > 0 && { color: '#ccc' }]}>{timer > 0 ? `Resend OTP in ${timer}s` : 'Resend OTP'}</Text>\n            </TouchableOpacity>\n          </>\n        )}\n\n        {/* OTP Verified */}\n        {step === 'verify' && (\n          <>\n            <View style={styles.successContainer}>\n              <Text style={styles.successEmoji}>‚úì</Text>\n              <Text style={styles.successMessage}>OTP Verified Successfully!</Text>\n              <Text style={styles.successSubtext}>Your email has been verified.</Text>\n            </View>\n            <TouchableOpacity style={[styles.continueButton, loading && { opacity: 0.7 }]} onPress={handleChangePassword} disabled={loading}>\n              {loading ? <ActivityIndicator color=\"#19034d\" /> : <Text style={styles.continueButtonText}>Complete Setup & Login</Text>}\n            </TouchableOpacity>\n          </>\n        )}\n      </View>\n    </View>\n  );\n}\n\n// ---------------------------\n// Styles (same as before)\n// ---------------------------\nconst styles = StyleSheet.create({\n  container: { flex: 1, backgroundColor: '#fff' },\n  backButton: { width: 40, height: 40, justifyContent: 'center', alignItems: 'center', marginLeft: 16, marginTop: 16 },\n  header: { backgroundColor: '#19034d', paddingTop: 20, paddingBottom: 30, paddingHorizontal: 20 },\n  headerTitle: { fontSize: 24, fontWeight: 'bold', color: '#fff', marginBottom: 8 },\n  headerSubtitle: { fontSize: 14, color: '#ddd' },\n  form: { padding: 20, flex: 1 },\n  inputGroup: { marginBottom: 20 },\n  label: { fontSize: 14, fontWeight: '600', color: '#19034d', marginBottom: 8 },\n  input: { borderWidth: 1, borderColor: '#ddd', borderRadius: 8, paddingHorizontal: 16, paddingVertical: 12, fontSize: 16, color: '#333' },\n  passwordContainer: { flexDirection: 'row', alignItems: 'center', borderWidth: 1, borderColor: '#ddd', borderRadius: 8, paddingHorizontal: 16, paddingVertical: 8 },\n  passwordInput: { flex: 1, fontSize: 16, color: '#333' },\n  emailDisplay: { flexDirection: 'row', alignItems: 'center', backgroundColor: '#f8f9fa', borderRadius: 12, paddingHorizontal: 16, paddingVertical: 14, marginBottom: 24, borderWidth: 1, borderColor: '#e5e5e5' },\n  emailText: { marginLeft: 12, fontSize: 16, color: '#333', fontWeight: '500' },\n  otpLabel: { fontSize: 14, fontWeight: '600', color: '#19034d', marginBottom: 8 },\n  otpInput: { fontSize: 24, fontWeight: 'bold', letterSpacing: 8, borderWidth: 2, borderColor: '#19034d', borderRadius: 12, paddingVertical: 16, paddingHorizontal: 16, textAlign: 'center', marginBottom: 24, color: '#19034d' },\n  continueButton: { backgroundColor: '#05f51d', paddingVertical: 16, borderRadius: 12, alignItems: 'center', marginTop: 10, marginBottom: 12 },\n  continueButtonText: { fontSize: 16, fontWeight: 'bold', color: '#19034d' },\n  resendButton: { paddingVertical: 12, alignItems: 'center' },\n  resendText: { fontSize: 14, color: '#05f51d', fontWeight: '500' },\n  successContainer: { alignItems: 'center', justifyContent: 'center', flex: 1, marginBottom: 50 },\n  successEmoji: { fontSize: 60, marginBottom: 16 },\n  successMessage: { fontSize: 20, fontWeight: 'bold', color: '#19034d', marginBottom: 8 },\n  successSubtext: { fontSize: 14, color: '#666' },\n});\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\components\\auth\\ForgotPassword.tsx": "import React, { useState } from 'react';\nimport axios from 'axios';\nimport { ArrowLeft, Mail } from 'lucide-react';\nimport SuccessModal from '../ui/SuccessModal';\n\ninterface ForgotPasswordProps {\n  onBack: () => void;\n}\n\nconst ForgotPassword: React.FC<ForgotPasswordProps> = ({ onBack }) => {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const res = await axios.post('http://localhost:5001/api/auth/forgot-password', { email });\n      \n      console.log(res.data); // { message, token }\n      setShowSuccess(true);\n    } catch (err: any) {\n      console.error(err.response?.data?.message || err.message);\n      setError(err.response?.data?.message || \"Something went wrong\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSuccessClose = () => {\n    setShowSuccess(false);\n    onBack();\n  };\n  return (\n    <div className=\"min-h-screen flex items-center justify-center\" style={{ backgroundColor: '#19034d' }}>\n      <div className=\"bg-white p-6 rounded-xl shadow-2xl w-full max-w-md\">\n        <div className=\"text-center mb-6\">\n          <div className=\"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center\" style={{ backgroundColor: '#05f51d' }}>\n            <Mail className=\"w-6 h-6 text-white\" />\n          </div>\n          <h1 className=\"text-xl font-bold\" style={{ color: '#19034d' }}>Reset Password</h1>\n          <p className=\"text-gray-600 mt-1 text-sm\">Enter your email to receive reset instructions</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email Address\n            </label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200\"\n              style={{ focusRingColor: '#05f51d' }}\n              placeholder=\"admin@gmail.com\"\n              required\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-2 px-4 rounded-lg text-white text-sm font-medium transition-all duration-200 hover:opacity-90 focus:ring-4 focus:ring-green-200 disabled:opacity-50\"\n            style={{ backgroundColor: '#05f51d' }}\n          >\n            {loading ? 'Sending...' : 'Send Reset Link'}\n          </button>\n        </form>\n\n        <button\n          onClick={onBack}\n          className=\"w-full mt-4 flex items-center justify-center space-x-2 py-2 px-4 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span>Back to Login</span>\n        </button>\n      </div>\n\n      <SuccessModal\n        isOpen={showSuccess}\n        onClose={handleSuccessClose}\n        title=\"Email Sent\"\n        message=\"Password reset instructions have been sent to your email address.\"\n      />\n    </div>\n  );\n};\n\nexport default ForgotPassword;",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\forgotpassword.tsx": "import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Alert,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport { ArrowLeft, Mail } from 'lucide-react-native';\r\n\r\nexport default function ForgotPassword() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState('');\r\n\r\n  const handleResetPassword = async () => {\r\n    if (!email) {\r\n      Alert.alert('Error', 'Please enter your email address');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://192.168.1.5:5000/api/send-otp', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          email,\r\n          type: 'forgot-password'\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        Alert.alert('OTP Sent', 'Verification code has been sent to your email.', [\r\n          {\r\n            text: 'OK',\r\n            onPress: () =>\r\n              router.push({\r\n                pathname: '/otpScreen',\r\n                params: {\r\n                  email,\r\n                  type: 'forgot-password'\r\n                },\r\n              }),\r\n          },\r\n        ]);\r\n      } else {\r\n        Alert.alert('Error', data.message || 'Failed to send OTP');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      Alert.alert('Error', 'Unable to send OTP. Check your connection.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={{ flex: 1, backgroundColor: '#fff' }}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n    >\r\n      <ScrollView\r\n        contentContainerStyle={styles.container}\r\n        showsVerticalScrollIndicator={false}\r\n        keyboardShouldPersistTaps=\"handled\"\r\n      >\r\n        <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\r\n          <ArrowLeft size={24} color=\"#19034d\" />\r\n        </TouchableOpacity>\r\n\r\n        <View style={styles.header}>\r\n          <Text style={styles.title}>Forgot Password</Text>\r\n          <Text style={styles.subtitle}>\r\n            Enter your email address and we'll send you a verification code\r\n          </Text>\r\n        </View>\r\n\r\n        <View style={styles.inputGroup}>\r\n          <Mail size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Email Address\"\r\n            value={email}\r\n            onChangeText={setEmail}\r\n            keyboardType=\"email-address\"\r\n            autoCapitalize=\"none\"\r\n            placeholderTextColor=\"#999\"\r\n          />\r\n        </View>\r\n\r\n        <TouchableOpacity style={styles.resetButton} onPress={handleResetPassword}>\r\n          <Text style={styles.resetButtonText}>Send Verification Code</Text>\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n    paddingBottom: 40,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  header: {\r\n    marginBottom: 48,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    marginBottom: 40,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 16,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n});",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\FLOW_IMPLEMENTATION.md": "# Complete User Flow Implementation - Certifications ‚Üí Password Setup ‚Üí OTP ‚Üí Login\r\n\r\n## Overview\r\nThis document describes the complete user flow from certifications upload through successful login with OTP verification.\r\n\r\n---\r\n\r\n## 1. **Certifications Screen** (`certifications.tsx`)\r\n### What happens:\r\n- User uploads certification documents (optional)\r\n- User completes certifications and clicks \"Finish Registration\"\r\n\r\n### Flow:\r\n1. Upload certificate files to backend\r\n2. Finalize registration on backend\r\n3. Navigate to Change Password screen\r\n4. Store user's email in AsyncStorage for the next step\r\n\r\n### Key Changes:\r\n```tsx\r\n// Navigate to change password after successful upload\r\nrouter.push('/changepassword');\r\nawait AsyncStorage.setItem('registrationEmail', email);\r\n```\r\n\r\n---\r\n\r\n## 2. **Change Password Screen** (`changepassword.tsx`) - NEW IMPLEMENTATION\r\n### Multi-Step Flow:\r\n\r\n#### Step 1: Set Password\r\n- User enters new password and confirms it\r\n- Validates password (min 6 characters, matching)\r\n- Sends OTP to user's email\r\n- Transitions to OTP verification step\r\n\r\n#### Step 2: OTP Verification\r\n- User receives OTP (6-digit code) via email\r\n- Enter OTP in the input field\r\n- 10-minute expiration timer with resend capability\r\n- Shows email address for confirmation\r\n\r\n#### Step 3: Confirm & Login\r\n- After OTP verification succeeds\r\n- Shows success message (‚úì)\r\n- User clicks \"Confirm & Login\" button\r\n- Password is saved to database\r\n- User is redirected to login screen\r\n\r\n### Backend Integration:\r\n```\r\n1. POST /api/send-otp { email }\r\n   - Generates 6-digit OTP\r\n   - Saves OTP to database (10 min expiry)\r\n   - Sends OTP via Gmail\r\n\r\n2. POST /api/verify-otp { email, otp }\r\n   - Verifies OTP matches and hasn't expired\r\n   - Sets otpVerified flag to true\r\n   - Clears OTP from database\r\n\r\n3. POST /api/change-password { email, newPassword }\r\n   - Checks otpVerified flag\r\n   - Hashes new password with bcrypt\r\n   - Updates password in database\r\n```\r\n\r\n---\r\n\r\n## 3. **Login Screen** (`login.tsx`) - ENHANCED\r\n### What happens:\r\n- User enters email and password\r\n- System validates credentials against database\r\n- On successful login:\r\n  - Shows \"You are now logged in!\" success message\r\n  - Stores session in AsyncStorage\r\n  - Redirects to dashboard\r\n\r\n### Key Features:\r\n- Loading state during authentication\r\n- Input fields disabled during login\r\n- Error handling for invalid credentials\r\n- Success notification before redirect\r\n\r\n---\r\n\r\n## Email Integration\r\n\r\n### OTP Email Template\r\n```html\r\nAccount Verification\r\nYour OTP code is:\r\n000000  (6-digit code)\r\n\r\nThis OTP will expire in 10 minutes.\r\nIf you didn't request this, please ignore this email.\r\n```\r\n\r\n### Email Service\r\n- Uses Nodemailer with Gmail SMTP\r\n- Configured in backend: `routes/auth.js`\r\n- Gmail credentials from `.env` or hardcoded fallback\r\n\r\n---\r\n\r\n## Database Schema Updates\r\n\r\n### Provider Model (`models/Provider.js`)\r\nAdded three new fields:\r\n```javascript\r\notp: { type: String, default: undefined }           // 6-digit OTP code\r\notpExpiry: { type: Date, default: undefined }       // OTP expiration time\r\notpVerified: { type: Boolean, default: false }      // OTP verification status\r\n```\r\n\r\n---\r\n\r\n## Complete Flow Diagram\r\n\r\n```\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Certifications     ‚îÇ\r\n‚îÇ  Upload Screen      ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n           ‚îÇ\r\n           ‚ñº\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Change Password    ‚îÇ\r\n‚îÇ  Step 1: Password   ‚îÇ\r\n‚îÇ  Input              ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n           ‚îÇ\r\n           ‚îú‚îÄ‚ñ∫ [API: /send-otp]\r\n           ‚îÇ   ‚îî‚îÄ‚ñ∫ Email OTP\r\n           ‚îÇ\r\n           ‚ñº\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Change Password    ‚îÇ\r\n‚îÇ  Step 2: OTP Entry  ‚îÇ\r\n‚îÇ  (6 digits)         ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n           ‚îÇ\r\n           ‚îú‚îÄ‚ñ∫ [API: /verify-otp]\r\n           ‚îÇ   ‚îî‚îÄ‚ñ∫ Verify & Store\r\n           ‚îÇ\r\n           ‚ñº\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Change Password    ‚îÇ\r\n‚îÇ  Step 3: Success    ‚îÇ\r\n‚îÇ  Confirmation       ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n           ‚îÇ\r\n           ‚îú‚îÄ‚ñ∫ [API: /change-password]\r\n           ‚îÇ   ‚îî‚îÄ‚ñ∫ Hash & Save\r\n           ‚îÇ\r\n           ‚ñº\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Login Screen       ‚îÇ\r\n‚îÇ  Email + Password   ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n           ‚îÇ\r\n           ‚îú‚îÄ‚ñ∫ [API: /login]\r\n           ‚îÇ   ‚îî‚îÄ‚ñ∫ Verify Credentials\r\n           ‚îÇ\r\n           ‚ñº\r\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n‚îÇ  Dashboard          ‚îÇ\r\n‚îÇ  (Successful Login) ‚îÇ\r\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n```\r\n\r\n---\r\n\r\n## API Endpoints Summary\r\n\r\n### Backend Endpoints Added/Modified\r\n\r\n#### 1. Send OTP\r\n```bash\r\nPOST /api/send-otp\r\nBody: { email }\r\nResponse: { success, message, expiresIn }\r\n```\r\n\r\n#### 2. Verify OTP\r\n```bash\r\nPOST /api/verify-otp\r\nBody: { email, otp }\r\nResponse: { success, message }\r\n```\r\n\r\n#### 3. Change Password\r\n```bash\r\nPOST /api/change-password\r\nBody: { email, newPassword }\r\nResponse: { success, message }\r\n```\r\n\r\n#### 4. Login (Existing)\r\n```bash\r\nPOST /api/login\r\nBody: { email, password }\r\nResponse: { success, provider, message }\r\n```\r\n\r\n---\r\n\r\n## Testing Checklist\r\n\r\n- [ ] **Certifications Upload**: Successfully upload files and navigate to password screen\r\n- [ ] **Set Password**: Enter password, validate matching, trigger OTP send\r\n- [ ] **Email Received**: Check Gmail for OTP email (sent to user's registered email)\r\n- [ ] **OTP Verification**: Enter correct OTP and verify successfully\r\n- [ ] **Password Change**: Confirm password is saved to database\r\n- [ ] **Login Success**: Login with new password\r\n- [ ] **Dashboard Access**: Successfully redirect to dashboard after login\r\n- [ ] **OTP Expiry**: Try expired OTP after 10 minutes\r\n- [ ] **Invalid OTP**: Try wrong OTP code, get error message\r\n- [ ] **Resend OTP**: Test resend functionality with countdown timer\r\n\r\n---\r\n\r\n## Environment Variables\r\n\r\nEnsure your backend `.env` has:\r\n```\r\nMONGO_URI=mongodb://127.0.0.1:27017/serviceProviderDB\r\nGMAIL_USER=mahnoorasif237@gmail.com\r\nGMAIL_PASS=bamxpvq (or use app-specific password)\r\n```\r\n\r\n---\r\n\r\n## Files Modified\r\n\r\n1. **Frontend**\r\n   - `apps/service-provider/sp v(2)/project/app/certifications.tsx` - Updated navigation\r\n   - `apps/service-provider/sp v(2)/project/app/changepassword.tsx` - Complete rewrite with OTP flow\r\n   - `apps/service-provider/sp v(2)/project/app/login.tsx` - Enhanced with loading state & success feedback\r\n\r\n2. **Backend**\r\n   - `backend/service-pp-backend/routes/auth.js` - Added OTP endpoints (send, verify, change-password)\r\n   - `backend/service-pp-backend/models/Provider.js` - Added OTP fields to schema\r\n\r\n---\r\n\r\n## Notes\r\n\r\n- OTP expires after 10 minutes\r\n- Password must be at least 6 characters\r\n- All email communications go through Gmail SMTP\r\n- Session is stored in AsyncStorage after successful login\r\n- OTP is cleared from database after successful verification\r\n\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-shops-backend\\inventory.js": "// inventory.js\r\nimport express from \"express\";\r\nimport mongoose from \"mongoose\";\r\n\r\nconst router = express.Router();\r\n\r\n// ‚úÖ Schema + Model\r\nconst inventorySchema = new mongoose.Schema({\r\n  name: { type: String, required: true },\r\n  description: String,\r\n  price: { type: Number, required: true },\r\n  subcategory: { type: String, default: \"\" },\r\n  available: { type: Boolean, default: true },\r\n});\r\n\r\nconst Inventory = mongoose.model(\"Inventory\", inventorySchema);\r\n\r\n//\r\n// üß© Routes\r\n//\r\n\r\n// Get all items\r\nrouter.get(\"/\", async (req, res) => {\r\n  try {\r\n    const items = await Inventory.find();\r\n    res.json(items);\r\n  } catch (err) {\r\n    res.status(500).json({ message: err.message });\r\n  }\r\n});\r\n\r\n// Add new item\r\nrouter.post(\"/\", async (req, res) => {\r\n  try {\r\n    const newItem = new Inventory(req.body);\r\n    const saved = await newItem.save();\r\n    res.status(201).json(saved);\r\n  } catch (err) {\r\n    res.status(400).json({ message: err.message });\r\n  }\r\n});\r\n\r\n// Edit item\r\nrouter.put(\"/:id\", async (req, res) => {\r\n  try {\r\n    const updated = await Inventory.findByIdAndUpdate(req.params.id, req.body, { new: true });\r\n    res.json(updated);\r\n  } catch (err) {\r\n    res.status(400).json({ message: err.message });\r\n  }\r\n});\r\n\r\n// Delete item\r\nrouter.delete(\"/:id\", async (req, res) => {\r\n  try {\r\n    await Inventory.findByIdAndDelete(req.params.id);\r\n    res.json({ message: \"Item deleted\" });\r\n  } catch (err) {\r\n    res.status(500).json({ message: err.message });\r\n  }\r\n});\r\n\r\n// Toggle availability\r\nrouter.patch(\"/:id/toggle\", async (req, res) => {\r\n  try {\r\n    const item = await Inventory.findById(req.params.id);\r\n    if (!item) return res.status(404).json({ message: \"Item not found\" });\r\n\r\n    item.available = !item.available;\r\n    await item.save();\r\n    res.json(item);\r\n  } catch (err) {\r\n    res.status(500).json({ message: err.message });\r\n  }\r\n});\r\n\r\nexport default router;\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\set-password.tsx": "import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Alert,\n  KeyboardAvoidingView,\n  Platform,\n  ScrollView,\n} from 'react-native';\nimport { useRouter, useLocalSearchParams } from 'expo-router';\nimport { Lock, Eye, EyeOff, ArrowLeft } from 'lucide-react-native';\n\nexport default function SetPasswordScreen() {\n  const router = useRouter();\n  const { email, name, phone } = useLocalSearchParams();\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n  const handleSubmit = async () => {\n  if (!password || !confirmPassword) {\n    Alert.alert('Error', 'Please fill in all fields');\n    return;\n  }\n\n  if (password !== confirmPassword) {\n    Alert.alert('Error', 'Passwords do not match');\n    return;\n  }\n\n  // ‚úÖ Password validation: 8-15 chars, uppercase, lowercase, number, special char\n  const passwordRegex =\n    /^(?=.[a-z])(?=.[A-Z])(?=.\\d)(?=.[!@#$%^&*()_+[\\]{};':\"\\\\|,.<>/?-]).{8,15}$/;\n\n  if (!passwordRegex.test(password)) {\n    Alert.alert(\n      'Error',\n      'Password must be 8-15 characters, include uppercase, lowercase, number, and special character.'\n    );\n    return;\n  }\n\n  try {\n    const response = await fetch('http://192.168.1.5:5000/api/auth/register', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name,\n        email,\n        phone,\n        password,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (data.success) {\n      Alert.alert('Success', 'Account created successfully!', [\n        { text: 'OK', onPress: () => router.replace('/login') },\n      ]);\n    } else {\n      Alert.alert('Error', data.message || 'Failed to create account');\n    }\n  } catch (error) {\n    console.error('Error creating account:', error);\n    Alert.alert('Error', 'Unable to create account. Check your connection.');\n  }\n};\n\n\n  return (\n    <KeyboardAvoidingView\n      style={{ flex: 1, backgroundColor: '#fff' }}\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\n    >\n      <ScrollView\n        contentContainerStyle={styles.container}\n        showsVerticalScrollIndicator={false}\n        keyboardShouldPersistTaps=\"handled\"\n      >\n        <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\n          <ArrowLeft size={24} color=\"#19034d\" />\n        </TouchableOpacity>\n\n        <View style={styles.header}>\n          <Text style={styles.title}>Set Password</Text>\n          <Text style={styles.subtitle}>Create a secure password for your account</Text>\n          <Text style={styles.userInfo}>{email}</Text>\n        </View>\n\n        <View style={styles.form}>\n          <View style={styles.inputGroup}>\n            <View style={styles.inputIcon}>\n              <Lock size={20} color=\"#666\" />\n            </View>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Password\"\n              value={password}\n              onChangeText={setPassword}\n              secureTextEntry={!showPassword}\n              placeholderTextColor=\"#999\"\n            />\n            <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\n              {showPassword ? (\n                <EyeOff size={20} color=\"#666\" />\n              ) : (\n                <Eye size={20} color=\"#666\" />\n              )}\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.inputGroup}>\n            <View style={styles.inputIcon}>\n              <Lock size={20} color=\"#666\" />\n            </View>\n            <TextInput\n              style={styles.input}\n              placeholder=\"Confirm Password\"\n              value={confirmPassword}\n              onChangeText={setConfirmPassword}\n              secureTextEntry={!showConfirmPassword}\n              placeholderTextColor=\"#999\"\n            />\n            <TouchableOpacity onPress={() => setShowConfirmPassword(!showConfirmPassword)}>\n              {showConfirmPassword ? (\n                <EyeOff size={20} color=\"#666\" />\n              ) : (\n                <Eye size={20} color=\"#666\" />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        <TouchableOpacity style={styles.submitButton} onPress={handleSubmit}>\n          <Text style={styles.submitButtonText}>Create Account</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexGrow: 1,\n    paddingHorizontal: 24,\n    paddingTop: 60,\n    paddingBottom: 40,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 24,\n  },\n  header: {\n    marginBottom: 48,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: '700',\n    color: '#19034d',\n    marginBottom: 8,\n  },\n  subtitle: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 16,\n  },\n  userInfo: {\n    fontSize: 14,\n    color: '#05f51d',\n    fontWeight: '500',\n  },\n  form: {\n    gap: 20,\n    marginBottom: 40,\n  },\n  inputGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa',\n    borderRadius: 12,\n    paddingHorizontal: 16,\n    borderWidth: 1,\n    borderColor: '#e5e5e5',\n  },\n  inputIcon: {\n    marginRight: 12,\n  },\n  input: {\n    flex: 1,\n    paddingVertical: 16,\n    fontSize: 16,\n    color: '#333',\n  },\n  submitButton: {\n    backgroundColor: '#05f51d',\n    paddingVertical: 16,\n    borderRadius: 12,\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  submitButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#19034d',\n  },\n});",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\otpScreen.jsx": "import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Alert,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { ArrowLeft } from 'lucide-react-native';\r\n\r\nexport default function OtpScreen() {\r\n  const router = useRouter();\r\n  const { email, name, phone, type } = useLocalSearchParams();\r\n  const [otp, setOtp] = useState('');\r\n  const [timer, setTimer] = useState(60);\r\n\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout | undefined;\r\n    if (timer > 0) {\r\n      interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [timer]);\r\n\r\n  const handleVerify = async () => {\r\n    if (!otp) {\r\n      Alert.alert('Error', 'Please enter the OTP');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://192.168.18.75:5000/api/verify-otp', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, otp }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        if (type === 'registration') {\r\n          Alert.alert('Success', 'OTP verified successfully', [\r\n            {\r\n              text: 'OK',\r\n              onPress: () =>\r\n                router.push({\r\n                  pathname: '/set-password',\r\n                  params: { email, name, phone },\r\n                }),\r\n            },\r\n          ]);\r\n        } else if (type === 'forgot-password') {\r\n          Alert.alert('Success', 'OTP verified successfully', [\r\n            {\r\n              text: 'OK',\r\n              onPress: () =>\r\n                router.push({\r\n                  pathname: '/changepassword',\r\n                  params: { email },\r\n                }),\r\n            },\r\n          ]);\r\n        }\r\n      } else {\r\n        Alert.alert('Error', data.message || 'Invalid OTP');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error verifying OTP:', error);\r\n      Alert.alert('Error', 'Unable to verify OTP. Check your connection.');\r\n    }\r\n  };\r\n\r\n  const handleResend = async () => {\r\n    try {\r\n      const response = await fetch('http://192.168.1.5:5000/api/resend-otp', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        Alert.alert('Success', 'OTP resent to your email');\r\n        setTimer(60);\r\n      } else {\r\n        Alert.alert('Error', data.message || 'Failed to resend OTP');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error resending OTP:', error);\r\n      Alert.alert('Error', 'Unable to resend OTP. Check your connection.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={{ flex: 1, backgroundColor: '#fff' }}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n    >\r\n      <ScrollView\r\n        contentContainerStyle={styles.container}\r\n        showsVerticalScrollIndicator={false}\r\n        keyboardShouldPersistTaps=\"handled\"\r\n      >\r\n        <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\r\n          <ArrowLeft size={24} color=\"#19034d\" />\r\n        </TouchableOpacity>\r\n\r\n        <View style={styles.header}>\r\n          <Text style={styles.title}>Enter OTP</Text>\r\n          <Text style={styles.subtitle}>\r\n            Verification code sent to <Text style={{ color: '#05f51d' }}>{email}</Text>\r\n          </Text>\r\n        </View>\r\n\r\n        <View style={styles.form}>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Enter OTP\"\r\n            value={otp}\r\n            onChangeText={setOtp}\r\n            keyboardType=\"number-pad\"\r\n            placeholderTextColor=\"#999\"\r\n            maxLength={6}\r\n          />\r\n        </View>\r\n\r\n        <TouchableOpacity style={styles.submitButton} onPress={handleVerify}>\r\n          <Text style={styles.submitButtonText}>Verify OTP</Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.resendButton, { opacity: timer > 0 ? 0.5 : 1 }]}\r\n          onPress={handleResend}\r\n          disabled={timer > 0}\r\n        >\r\n          <Text style={styles.resendButtonText}>\r\n  {timer > 0 ? `Resend OTP in ${timer}s` : 'Resend OTP'}\r\n</Text>\r\n\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n    paddingBottom: 40,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  header: {\r\n    marginBottom: 48,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n  },\r\n  form: {\r\n    marginBottom: 40,\r\n  },\r\n  input: {\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingVertical: 16,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    fontSize: 20,\r\n    color: '#333',\r\n    textAlign: 'center',\r\n    letterSpacing: 8,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n    marginBottom: 16,\r\n  },\r\n  submitButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n  resendButton: {\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#05f51d',\r\n  },\r\n  resendButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#05f51d',\r\n  },\r\n});",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\app\\changepassword.tsx": "import React, { useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Alert,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { ArrowLeft, Lock, Eye, EyeOff } from 'lucide-react-native';\r\n\r\nexport default function ChangePassword() {\r\n  const router = useRouter();\r\n  const { email } = useLocalSearchParams();\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleChangePassword = async () => {\r\n    if (!newPassword || !confirmPassword) {\r\n      Alert.alert('Error', 'Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      Alert.alert('Error', 'Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 6) {\r\n      Alert.alert('Error', 'Password must be at least 6 characters');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://192.168.1.5:5000/api/reset-password', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          email,\r\n          password: newPassword,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        Alert.alert('Success', 'Your password has been changed successfully!', [\r\n          { text: 'OK', onPress: () => router.replace('/login') },\r\n        ]);\r\n      } else {\r\n        Alert.alert('Error', data.message || 'Failed to change password');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error changing password:', error);\r\n      Alert.alert('Error', 'Unable to change password. Check your connection.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={{ flex: 1, backgroundColor: '#fff' }}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n    >\r\n      <ScrollView\r\n        contentContainerStyle={styles.container}\r\n        showsVerticalScrollIndicator={false}\r\n        keyboardShouldPersistTaps=\"handled\"\r\n      >\r\n        <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\r\n          <ArrowLeft size={24} color=\"#19034d\" />\r\n        </TouchableOpacity>\r\n\r\n        <View style={styles.header}>\r\n          <Text style={styles.title}>Change Password</Text>\r\n          <Text style={styles.subtitle}>Enter your new password below</Text>\r\n          <Text style={styles.userInfo}>{email}</Text>\r\n        </View>\r\n\r\n        <View style={styles.form}>\r\n          <View style={styles.inputGroup}>\r\n            <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"New Password\"\r\n              value={newPassword}\r\n              onChangeText={setNewPassword}\r\n              secureTextEntry={!showPassword}\r\n              placeholderTextColor=\"#999\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputGroup}>\r\n            <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Confirm Password\"\r\n              value={confirmPassword}\r\n              onChangeText={setConfirmPassword}\r\n              secureTextEntry={!showPassword}\r\n              placeholderTextColor=\"#999\"\r\n            />\r\n            <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\r\n              {showPassword ? (\r\n                <EyeOff size={20} color=\"#666\" />\r\n              ) : (\r\n                <Eye size={20} color=\"#666\" />\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n\r\n        <TouchableOpacity style={styles.resetButton} onPress={handleChangePassword}>\r\n          <Text style={styles.resetButtonText}>Update Password</Text>\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n    paddingBottom: 40,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  header: {\r\n    marginBottom: 48,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 16,\r\n  },\r\n  userInfo: {\r\n    fontSize: 14,\r\n    color: '#05f51d',\r\n    fontWeight: '500',\r\n  },\r\n  form: {\r\n    gap: 20,\r\n    marginBottom: 40,\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 14,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n});",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\contexts\\AuthContext.tsx": "import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport axios from 'axios';\n\ninterface AuthContextType {\n  isAuthenticated: boolean;\n  login: (email: string, password: string) => Promise<boolean>;\n  logout: () => void;\n  user: { email: string; role: string } | null;\n  error: string | null;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) throw new Error('useAuth must be used within AuthProvider');\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState<{ email: string; role: string } | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // ‚úÖ Login function (calls backend only)\n  const login = async (email: string, password: string): Promise<boolean> => {\n    try {\n      const res = await axios.post('http://localhost:5001/api/auth/login', { email, password });\n      \n      // Backend returns { message: \"...\", role: \"...\" }\n      if (res.data.role) {\n        setIsAuthenticated(true);\n        setUser({ email, role: res.data.role });\n        setError(null);\n        return true;\n      } else {\n        setError(res.data.message || \"Invalid email or password\");\n        setIsAuthenticated(false);\n        setUser(null);\n        return false;\n      }\n    } catch (err: any) {\n      setError(err.response?.data?.message || \"Invalid email or password\");\n      setIsAuthenticated(false);\n      setUser(null);\n      return false;\n    }\n  };\n\n  // ‚úÖ Logout function\n  const logout = () => {\n    setIsAuthenticated(false);\n    setUser(null);\n    setError(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ isAuthenticated, login, logout, user, error }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\admin-backend\\apps\\admin-backend\\emailserver.js": "const express = require('express');\r\nconst cors = require('cors');\r\nconst nodemailer = require('nodemailer');\r\n\r\nconst GMAIL_USER = 'mahnoorasif237@gmail.com';\r\nconst GMAIL_PASS = 'bamxpvq';\r\n\r\nconst app = express();\r\nconst PORT = 5001; // Use a different port than your frontend\r\n\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\napp.get('/', (req, res) => {\r\n  res.send('Email server is running');\r\n});\r\n\r\n// üì© Send contact form email\r\napp.post('/send-mail', async (req, res) => {\r\n  const { fullName, email, subject, message } = req.body;\r\n\r\n  const transporter = nodemailer.createTransport({\r\n    host: 'smtp.gmail.com',\r\n    port: 465,\r\n    secure: true,\r\n    auth: {\r\n      user: GMAIL_USER,\r\n      pass: GMAIL_PASS,\r\n    },\r\n  });\r\n\r\n  const mailOptions = {\r\n    from: GMAIL_USER,\r\n    to: 'mahnoorasif237@gmail.com',\r\n    subject: `New Contact Request from ${fullName}`,\r\n    html: `\r\n      <p><strong>Name:</strong> ${fullName}</p>\r\n      <p><strong>Email:</strong> ${email}</p>\r\n      <p><strong>Subject:</strong> ${subject}</p>\r\n      <p><strong>Message:</strong> ${message}</p>\r\n    `,\r\n  };\r\n\r\n  try {\r\n    await transporter.sendMail(mailOptions);\r\n    res.status(200).json({ message: 'Email sent!' });\r\n  } catch (error) {\r\n    console.error(error);\r\n    res.status(500).json({ message: 'Failed to send email' });\r\n  }\r\n});\r\n\r\n// üîê Forgot Password route\r\napp.post('/api/auth/forgot-password', async (req, res) => {\r\n  const { email } = req.body;\r\n\r\n  const transporter = nodemailer.createTransport({\r\n    service: 'gmail',\r\n    auth: {\r\n      user: GMAIL_USER,\r\n      pass: GMAIL_PASS,\r\n    },\r\n  });\r\n\r\n  const mailOptions = {\r\n    from: GMAIL_USER,\r\n    to: email,\r\n    subject: 'Reset Your Password',\r\n    html: `<p>Click <a href=\"http://localhost:3000/reset-password?email=${email}\">here</a> to reset your password.</p>`,\r\n  };\r\n\r\n  try {\r\n    await transporter.sendMail(mailOptions);\r\n    res.status(200).json({ message: 'Reset email sent' });\r\n  } catch (error) {\r\n    console.error('Error sending reset email:', error);\r\n    res.status(500).json({ message: 'Failed to send reset email' });\r\n  }\r\n});\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`Email server running on port ${PORT}`);\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Service-seeker\\SS\\project\\contexts\\SettingsContext.tsx": "// import React, { createContext, useContext, useState, useEffect } from 'react';\r\n// import AsyncStorage from '@react-native-async-storage/async-storage';\r\n// import { Platform } from 'react-native';\r\n// import * as Haptics from 'expo-haptics';\r\n\r\n// interface SettingsContextType {\r\n//   soundEnabled: boolean;\r\n//   vibrationEnabled: boolean;\r\n//   setSoundEnabled: (enabled: boolean) => void;\r\n//   setVibrationEnabled: (enabled: boolean) => void;\r\n//   playSound: (type?: 'success' | 'error' | 'notification') => void;\r\n//   triggerVibration: (type?: 'light' | 'medium' | 'heavy') => void;\r\n// }\r\n\r\n// const SettingsContext = createContext<SettingsContextType | undefined>(undefined);\r\n\r\n// export const SettingsProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n//   const [soundEnabled, setSoundEnabledState] = useState(true);\r\n//   const [vibrationEnabled, setVibrationEnabledState] = useState(true);\r\n\r\n//   useEffect(() => {\r\n//     loadSettings();\r\n//   }, []);\r\n\r\n//   const loadSettings = async () => {\r\n//     try {\r\n//       const sound = await AsyncStorage.getItem('soundEnabled');\r\n//       const vibration = await AsyncStorage.getItem('vibrationEnabled');\r\n      \r\n//       if (sound !== null) setSoundEnabledState(JSON.parse(sound));\r\n//       if (vibration !== null) setVibrationEnabledState(JSON.parse(vibration));\r\n//     } catch (error) {\r\n//       console.error('Error loading settings:', error);\r\n//     }\r\n//   };\r\n\r\n//   const setSoundEnabled = async (enabled: boolean) => {\r\n//     try {\r\n//       setSoundEnabledState(enabled);\r\n//       await AsyncStorage.setItem('soundEnabled', JSON.stringify(enabled));\r\n//     } catch (error) {\r\n//       console.error('Error saving sound setting:', error);\r\n//     }\r\n//   };\r\n\r\n//   const setVibrationEnabled = async (enabled: boolean) => {\r\n//     try {\r\n//       setVibrationEnabledState(enabled);\r\n//       await AsyncStorage.setItem('vibrationEnabled', JSON.stringify(enabled));\r\n//     } catch (error) {\r\n//       console.error('Error saving vibration setting:', error);\r\n//     }\r\n//   };\r\n\r\n//   const playSound = (type: 'success' | 'error' | 'notification' = 'notification') => {\r\n//     if (!soundEnabled) return;\r\n    \r\n//     if (Platform.OS === 'web') {\r\n//       // Web audio implementation\r\n//       try {\r\n//         const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\r\n//         const oscillator = audioContext.createOscillator();\r\n//         const gainNode = audioContext.createGain();\r\n        \r\n//         oscillator.connect(gainNode);\r\n//         gainNode.connect(audioContext.destination);\r\n        \r\n//         // Different frequencies for different sound types\r\n//         const frequencies = {\r\n//           success: 800,\r\n//           error: 400,\r\n//           notification: 600\r\n//         };\r\n        \r\n//         oscillator.frequency.setValueAtTime(frequencies[type], audioContext.currentTime);\r\n//         oscillator.type = 'sine';\r\n        \r\n//         gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);\r\n//         gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);\r\n        \r\n//         oscillator.start(audioContext.currentTime);\r\n//         oscillator.stop(audioContext.currentTime + 0.3);\r\n//       } catch (error) {\r\n//         console.log('Web audio not supported');\r\n//       }\r\n//     } else {\r\n//       // Mobile sound would be implemented with expo-av\r\n//       console.log(`Playing ${type} sound`);\r\n//     }\r\n//   };\r\n\r\n//   const triggerVibration = (type: 'light' | 'medium' | 'heavy' = 'light') => {\r\n//     if (!vibrationEnabled) return;\r\n    \r\n//     if (Platform.OS !== 'web') {\r\n//       try {\r\n//         switch (type) {\r\n//           case 'light':\r\n//             Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\r\n//             break;\r\n//           case 'medium':\r\n//             Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\r\n//             break;\r\n//           case 'heavy':\r\n//             Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);\r\n//             break;\r\n//         }\r\n//       } catch (error) {\r\n//         console.log('Haptics not available');\r\n//       }\r\n//     } else {\r\n//       // Web vibration\r\n//       if (navigator.vibrate) {\r\n//         const patterns = {\r\n//           light: 50,\r\n//           medium: 100,\r\n//           heavy: 200\r\n//         };\r\n//         navigator.vibrate(patterns[type]);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <SettingsContext.Provider value={{\r\n//       soundEnabled,\r\n//       vibrationEnabled,\r\n//       setSoundEnabled,\r\n//       setVibrationEnabled,\r\n//       playSound,\r\n//       triggerVibration\r\n//     }}>\r\n//       {children}\r\n//     </SettingsContext.Provider>\r\n//   );\r\n// };\r\n\r\n// export const useSettings = () => {\r\n//   const context = useContext(SettingsContext);\r\n//   if (!context) {\r\n//     throw new Error('useSettings must be used within a SettingsProvider');\r\n//   }\r\n//   return context;\r\n// };",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\admin-backend\\apps\\admin-backend\\notifications.js": "",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-provider\\sp v(2)\\project\\app\\changepassword.tsx": "import React, { useState, useEffect } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, Alert, StyleSheet, ActivityIndicator } from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport { ArrowLeft, Lock, Eye, EyeOff, Mail } from 'lucide-react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport axios from 'axios';\r\n\r\ntype Step = 'password' | 'otp' | 'verify';\r\n\r\nexport default function ChangePassword() {\r\n  const router = useRouter();\r\n  const [step, setStep] = useState<Step>('password');\r\n  const [email, setEmail] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [otp, setOtp] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [timer, setTimer] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const loadEmail = async () => {\r\n      try {\r\n        const savedEmail = await AsyncStorage.getItem('registrationEmail');\r\n        if (savedEmail) {\r\n          setEmail(savedEmail);\r\n        }\r\n      } catch (err) {\r\n        console.error('Error loading email:', err);\r\n      }\r\n    };\r\n    loadEmail();\r\n  }, []);\r\n\r\n  // Timer for OTP resend\r\n  useEffect(() => {\r\n    let interval: NodeJS.Timeout;\r\n    if (timer > 0) {\r\n      interval = setInterval(() => setTimer(t => t - 1), 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [timer]);\r\n\r\n  const handleSetPassword = async () => {\r\n    if (!newPassword || !confirmPassword) {\r\n      Alert.alert('Error', 'Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      Alert.alert('Error', 'Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 6) {\r\n      Alert.alert('Error', 'Password must be at least 6 characters');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Send OTP to email\r\n      await axios.post('http://localhost:5004/api/send-otp', { email });\r\n      Alert.alert('Success', 'OTP has been sent to your email. Please check your inbox.');\r\n      setStep('otp');\r\n      setTimer(600); // 10 minutes\r\n    } catch (err: any) {\r\n      console.error('Error sending OTP:', err);\r\n      Alert.alert('Error', err.response?.data?.message || 'Failed to send OTP');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOtp = async () => {\r\n    if (!otp) {\r\n      Alert.alert('Error', 'Please enter the OTP');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Verify OTP\r\n      await axios.post('http://localhost:5004/api/verify-otp', { email, otp });\r\n      setStep('verify');\r\n    } catch (err: any) {\r\n      console.error('Error verifying OTP:', err);\r\n      Alert.alert('Error', err.response?.data?.message || 'Invalid OTP');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChangePassword = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Change password\r\n      await axios.post('http://localhost:5004/api/change-password', { email, newPassword });\r\n      \r\n      Alert.alert('Success', 'Password changed successfully! Please login with your new password.', [\r\n        {\r\n          text: 'OK',\r\n          onPress: async () => {\r\n            await AsyncStorage.removeItem('registrationEmail');\r\n            router.replace('/login');\r\n          }\r\n        }\r\n      ]);\r\n    } catch (err: any) {\r\n      console.error('Error changing password:', err);\r\n      Alert.alert('Error', err.response?.data?.message || 'Failed to change password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResendOtp = async () => {\r\n    if (timer > 0) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      await axios.post('http://localhost:5004/api/send-otp', { email });\r\n      Alert.alert('Success', 'OTP has been resent to your email');\r\n      setTimer(600);\r\n    } catch (err: any) {\r\n      Alert.alert('Error', 'Failed to resend OTP');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\r\n        <ArrowLeft size={24} color=\"#19034d\" />\r\n      </TouchableOpacity>\r\n\r\n      {step === 'password' && (\r\n        <>\r\n          <Text style={styles.title}>Set Password</Text>\r\n          <Text style={styles.subtitle}>Create a strong password for your account</Text>\r\n\r\n          <View style={styles.inputGroup}>\r\n            <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"New Password\"\r\n              value={newPassword}\r\n              onChangeText={setNewPassword}\r\n              secureTextEntry={!showPassword}\r\n              placeholderTextColor=\"#999\"\r\n            />\r\n          </View>\r\n\r\n          <View style={styles.inputGroup}>\r\n            <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Confirm Password\"\r\n              value={confirmPassword}\r\n              onChangeText={setConfirmPassword}\r\n              secureTextEntry={!showPassword}\r\n              placeholderTextColor=\"#999\"\r\n            />\r\n            <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\r\n              {showPassword ? (\r\n                <EyeOff size={20} color=\"#666\" />\r\n              ) : (\r\n                <Eye size={20} color=\"#666\" />\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <TouchableOpacity \r\n            style={[styles.resetButton, loading && { opacity: 0.7 }]} \r\n            onPress={handleSetPassword}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <ActivityIndicator color=\"#19034d\" />\r\n            ) : (\r\n              <Text style={styles.resetButtonText}>Continue to OTP</Text>\r\n            )}\r\n          </TouchableOpacity>\r\n        </>\r\n      )}\r\n\r\n      {step === 'otp' && (\r\n        <>\r\n          <Text style={styles.title}>Verify Email</Text>\r\n          <Text style={styles.subtitle}>We've sent an OTP to your email</Text>\r\n\r\n          <View style={styles.emailDisplay}>\r\n            <Mail size={20} color=\"#19034d\" />\r\n            <Text style={styles.emailText}>{email}</Text>\r\n          </View>\r\n\r\n          <Text style={styles.otpLabel}>Enter OTP</Text>\r\n          <TextInput\r\n            style={styles.otpInput}\r\n            placeholder=\"000000\"\r\n            value={otp}\r\n            onChangeText={setOtp}\r\n            keyboardType=\"number-pad\"\r\n            maxLength={6}\r\n            placeholderTextColor=\"#ccc\"\r\n          />\r\n\r\n          <TouchableOpacity \r\n            style={[styles.resetButton, loading && { opacity: 0.7 }]} \r\n            onPress={handleVerifyOtp}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <ActivityIndicator color=\"#19034d\" />\r\n            ) : (\r\n              <Text style={styles.resetButtonText}>Verify OTP</Text>\r\n            )}\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity \r\n            style={styles.resendButton}\r\n            onPress={handleResendOtp}\r\n            disabled={timer > 0}\r\n          >\r\n            <Text style={[styles.resendText, timer > 0 && { color: '#ccc' }]}>\r\n              {timer > 0 ? `Resend OTP in ${timer}s` : 'Resend OTP'}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </>\r\n      )}\r\n\r\n      {step === 'verify' && (\r\n        <>\r\n          <View style={styles.successContainer}>\r\n            <Text style={styles.successEmoji}>‚úì</Text>\r\n            <Text style={styles.title}>OTP Verified</Text>\r\n            <Text style={styles.subtitle}>Your email has been verified. Click below to confirm password change.</Text>\r\n          </View>\r\n\r\n          <TouchableOpacity \r\n            style={[styles.resetButton, loading && { opacity: 0.7 }]} \r\n            onPress={handleChangePassword}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <ActivityIndicator color=\"#19034d\" />\r\n            ) : (\r\n              <Text style={styles.resetButtonText}>Confirm & Login</Text>\r\n            )}\r\n          </TouchableOpacity>\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 24,\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    marginBottom: 20,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 14,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  emailDisplay: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 14,\r\n    marginBottom: 24,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n  },\r\n  emailText: {\r\n    marginLeft: 12,\r\n    fontSize: 16,\r\n    color: '#333',\r\n    fontWeight: '500',\r\n  },\r\n  otpLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  otpInput: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    letterSpacing: 8,\r\n    borderWidth: 2,\r\n    borderColor: '#19034d',\r\n    borderRadius: 12,\r\n    paddingVertical: 16,\r\n    paddingHorizontal: 16,\r\n    textAlign: 'center',\r\n    marginBottom: 24,\r\n    color: '#19034d',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n  resendButton: {\r\n    paddingVertical: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resendText: {\r\n    fontSize: 14,\r\n    color: '#05f51d',\r\n    fontWeight: '500',\r\n  },\r\n  successContainer: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    flex: 1,\r\n    marginBottom: 50,\r\n  },\r\n  successEmoji: {\r\n    fontSize: 60,\r\n    marginBottom: 16,\r\n  },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\service-shops\\Service Shops\\project\\app\\changepassword.tsx": "import React, { useState } from 'react';\r\nimport { View, Text, TextInput, TouchableOpacity, Alert, StyleSheet } from 'react-native';\r\nimport { useRouter } from 'expo-router';\r\nimport { ArrowLeft, Lock, Eye, EyeOff } from 'lucide-react-native';\r\n\r\nexport default function ChangePassword() {\r\n  const router = useRouter();\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleChangePassword = () => {\r\n    if (!newPassword || !confirmPassword) {\r\n      Alert.alert('Error', 'Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      Alert.alert('Error', 'Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    // Simulate success\r\n    Alert.alert('Success', 'Your password has been changed successfully!', [\r\n      { text: 'OK', onPress: () => router.replace('/') },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <TouchableOpacity style={styles.backButton} onPress={() => router.back()}>\r\n        <ArrowLeft size={24} color=\"#19034d\" />\r\n      </TouchableOpacity>\r\n\r\n      <Text style={styles.title}>Change Password</Text>\r\n      <Text style={styles.subtitle}>Enter your new password below</Text>\r\n\r\n      <View style={styles.inputGroup}>\r\n        <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"New Password\"\r\n          value={newPassword}\r\n          onChangeText={setNewPassword}\r\n          secureTextEntry={!showPassword}\r\n          placeholderTextColor=\"#999\"\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.inputGroup}>\r\n        <Lock size={20} color=\"#666\" style={{ marginRight: 10 }} />\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Confirm Password\"\r\n          value={confirmPassword}\r\n          onChangeText={setConfirmPassword}\r\n          secureTextEntry={!showPassword}\r\n          placeholderTextColor=\"#999\"\r\n        />\r\n        <TouchableOpacity onPress={() => setShowPassword(!showPassword)}>\r\n          {showPassword ? (\r\n            <EyeOff size={20} color=\"#666\" />\r\n          ) : (\r\n            <Eye size={20} color=\"#666\" />\r\n          )}\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <TouchableOpacity style={styles.resetButton} onPress={handleChangePassword}>\r\n        <Text style={styles.resetButtonText}>Update Password</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    paddingHorizontal: 24,\r\n    paddingTop: 60,\r\n  },\r\n  backButton: {\r\n    width: 40,\r\n    height: 40,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 24,\r\n  },\r\n  title: {\r\n    fontSize: 28,\r\n    fontWeight: '700',\r\n    color: '#19034d',\r\n    marginBottom: 8,\r\n  },\r\n  subtitle: {\r\n    fontSize: 16,\r\n    color: '#666',\r\n    marginBottom: 24,\r\n  },\r\n  inputGroup: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n    borderRadius: 12,\r\n    paddingHorizontal: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#e5e5e5',\r\n    marginBottom: 20,\r\n  },\r\n  input: {\r\n    flex: 1,\r\n    paddingVertical: 14,\r\n    fontSize: 16,\r\n    color: '#333',\r\n  },\r\n  resetButton: {\r\n    backgroundColor: '#05f51d',\r\n    paddingVertical: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  resetButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#19034d',\r\n  },\r\n});\r\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\apps\\Admin-web\\Admin\\project\\src\\pages\\Verification.tsx": "import React, { useState } from 'react';\nimport { Search, Eye, Check, X, FileText, Image, ZoomIn } from 'lucide-react';\n\nconst Verification: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'providers' | 'shops'>('providers');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedEntity, setSelectedEntity] = useState<any>(null);\n  const [showModal, setShowModal] = useState(false);\n  const [viewingDocument, setViewingDocument] = useState<string | null>(null);\n\n  // ---------------- Providers Data ----------------\n  const [pendingProviders, setPendingProviders] = useState([\n    {\n      id: 1,\n      name: 'Muhammad Tariq',\n      email: 'tariq@example.com',\n      phone: '+92-300-5555555',\n      service: 'Electrician',\n      submittedDate: '2024-12-20',\n      documents: {\n        cnic: { front: true, back: true },\n        certificate: true,\n        clearance: true\n      },\n      experience: '5 years',\n      location: 'Lahore'\n    },\n    {\n      id: 2,\n      name: 'Aisha Malik',\n      email: 'aisha@example.com',\n      phone: '+92-301-6666666',\n      service: 'House Cleaning',\n      submittedDate: '2024-12-19',\n      documents: {\n        cnic: { front: true, back: true },\n        certificate: false,\n        clearance: true\n      },\n      experience: '3 years',\n      location: 'Karachi'\n    }\n  ]);\n\n  // ---------------- Shops Data ----------------\n  const [pendingShops, setPendingShops] = useState([\n    {\n      id: 101,\n      name: 'FixIt Electronics',\n      email: 'fixit@example.com',\n      phone: '+92-311-1234567',\n      service: 'Electronics Repair',\n      submittedDate: '2024-12-18',\n      documents: {\n        cnic: { front: true, back: true },\n        certificate: true,\n        clearance: true\n      },\n      experience: '10 years',\n      location: 'Islamabad'\n    },\n    {\n      id: 102,\n      name: 'CleanPro Services',\n      email: 'cleanpro@example.com',\n      phone: '+92-322-7654321',\n      service: 'Cleaning',\n      submittedDate: '2024-12-17',\n      documents: {\n        cnic: { front: true, back: true },\n        certificate: true,\n        clearance: false\n      },\n      experience: '6 years',\n      location: 'Lahore'\n    }\n  ]);\n\n  // ---------------- Handlers ----------------\n  const handleView = (entity: any) => {\n    setSelectedEntity(entity);\n    setShowModal(true);\n  };\n\n  const handleApprove = (entityId: number) => {\n    if (activeTab === 'providers') {\n      setPendingProviders(pendingProviders.filter(p => p.id !== entityId));\n    } else {\n      setPendingShops(pendingShops.filter(s => s.id !== entityId));\n    }\n    alert('Approved successfully!');\n    setShowModal(false);\n  };\n\n  const handleReject = (entityId: number) => {\n    if (activeTab === 'providers') {\n      setPendingProviders(pendingProviders.filter(p => p.id !== entityId));\n    } else {\n      setPendingShops(pendingShops.filter(s => s.id !== entityId));\n    }\n    alert('Rejected!');\n    setShowModal(false);\n  };\n\n  const viewDocument = (docType: string) => {\n     setShowModal(false);\n    setViewingDocument(docType);\n  };\n\n  const DocumentStatus = ({ available }: { available: boolean }) => (\n    <div className={`flex items-center space-x-1 ${available ? 'text-green-600' : 'text-red-600'}`}>\n      {available ? <Check className=\"w-4 h-4\" /> : <X className=\"w-4 h-4\" />}\n      <span className=\"text-xs\">{available ? 'Available' : 'Missing'}</span>\n    </div>\n  );\n\n  // ---------------- Filtering ----------------\n  const filteredEntities =\n    activeTab === 'providers'\n      ? pendingProviders.filter(e =>\n          e.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          e.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          e.service.toLowerCase().includes(searchTerm.toLowerCase())\n        )\n      : pendingShops.filter(e =>\n          e.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          e.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          e.service.toLowerCase().includes(searchTerm.toLowerCase())\n        );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\" style={{ color: '#19034d' }}>\n          Verification Center\n        </h1>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex space-x-2 bg-white border border-gray-200 rounded-lg p-2\">\n        <button\n          onClick={() => setActiveTab('providers')}\n          className={`px-4 py-2 rounded-lg font-medium ${\n            activeTab === 'providers'\n              ? 'bg-blue-500 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          Providers ({pendingProviders.length})\n        </button>\n        <button\n          onClick={() => setActiveTab('shops')}\n          className={`px-4 py-2 rounded-lg font-medium ${\n            activeTab === 'shops'\n              ? 'bg-blue-500 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          Shops ({pendingShops.length})\n        </button>\n      </div>\n\n      {/* Search */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder={`Search pending ${activeTab}...`}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-200 focus:border-transparent\"\n          />\n        </div>\n      </div>\n\n      {/* List */}\n      <div className=\"space-y-6\">\n        {filteredEntities.map((entity) => (\n          <div key={entity.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n            <div className=\"flex flex-col lg:flex-row gap-6\">\n              {/* Info */}\n              <div className=\"flex-1\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div>\n                    <h3 className=\"text-xl font-semibold\" style={{ color: '#19034d' }}>{entity.name}</h3>\n                    <p className=\"text-gray-600\">{entity.email}</p>\n                    <p className=\"text-gray-600\">{entity.phone}</p>\n                    <div className=\"flex items-center space-x-4 mt-2\">\n                      <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n                        {entity.service}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">{entity.experience} experience</span>\n                      <span className=\"text-sm text-gray-500\">üìç {entity.location}</span>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm text-gray-500\">Submitted</p>\n                    <p className=\"text-sm font-medium\">{new Date(entity.submittedDate).toLocaleDateString()}</p>\n                  </div>\n                </div>\n\n                {/* Documents */}\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 mb-3\">Document Verification</h4>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">CNIC Front</span>\n                      <DocumentStatus available={entity.documents.cnic.front} />\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">CNIC Back</span>\n                      <DocumentStatus available={entity.documents.cnic.back} />\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">Certificate</span>\n                      <DocumentStatus available={entity.documents.certificate} />\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">Clearance</span>\n                      <DocumentStatus available={entity.documents.clearance} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"lg:w-64 space-y-3\">\n                <button\n                  onClick={() => handleView(entity)}\n                  className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  <span>View Documents</span>\n                </button>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <button\n                    onClick={() => handleApprove(entity.id)}\n                    className=\"flex items-center justify-center space-x-2 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-opacity\"\n                    style={{ backgroundColor: '#05f51d' }}\n                  >\n                    <Check className=\"w-4 h-4\" />\n                    <span>Approve</span>\n                  </button>\n                  <button\n                    onClick={() => handleReject(entity.id)}\n                    className=\"flex items-center justify-center space-x-2 px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                    <span>Reject</span>\n                  </button>\n                </div>\n                <textarea\n                  placeholder=\"Add verification notes or rejection reason...\"\n                  rows={3}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-200 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Empty State */}\n      {filteredEntities.length === 0 && (\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center\">\n          <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n          <p className=\"text-gray-500\">No {activeTab} found matching your search criteria.</p>\n        </div>\n      )}\n\n      {/* Full Modal View (All Docs) */}\n      {showModal && selectedEntity && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200 flex justify-between items-center\">\n              <h3 className=\"text-xl font-semibold\" style={{ color: '#19034d' }}>\n                Verification Details - {selectedEntity.name}\n              </h3>\n              <button onClick={() => setShowModal(false)} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            <div className=\"p-6 space-y-6\">\n              {/* Info */}\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div><p className=\"text-sm text-gray-600\">Name</p><p className=\"font-medium\">{selectedEntity.name}</p></div>\n                <div><p className=\"text-sm text-gray-600\">Email</p><p className=\"font-medium\">{selectedEntity.email}</p></div>\n                <div><p className=\"text-sm text-gray-600\">Phone</p><p className=\"font-medium\">{selectedEntity.phone}</p></div>\n                <div><p className=\"text-sm text-gray-600\">Service</p><p className=\"font-medium\">{selectedEntity.service}</p></div>\n                <div><p className=\"text-sm text-gray-600\">Experience</p><p className=\"font-medium\">{selectedEntity.experience}</p></div>\n                <div><p className=\"text-sm text-gray-600\">Location</p><p className=\"font-medium\">{selectedEntity.location}</p></div>\n              </div>\n\n              {/* Docs Grid */}\n              <div>\n                <h4 className=\"font-medium text-gray-900 mb-4\">Documents</h4>\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n                  {['cnic-front', 'cnic-back', 'certificate', 'clearance'].map((docType) => (\n                    <div key={docType} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <p className=\"text-sm font-medium\">{docType.replace('-', ' ').toUpperCase()}</p>\n                        <button\n                          onClick={() => viewDocument(docType)}\n                          className=\"text-blue-600 hover:text-blue-800\"\n                        >\n                          <ZoomIn className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                      <div\n                        className=\"w-full h-32 bg-gray-100 rounded-lg flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors\"\n                        onClick={() => viewDocument(docType)}\n                      >\n                        {docType.includes('front') && selectedEntity.documents.cnic.front ? (\n                          <FileText className=\"w-8 h-8 text-green-600\" />\n                        ) : docType.includes('back') && selectedEntity.documents.cnic.back ? (\n                          <FileText className=\"w-8 h-8 text-green-600\" />\n                        ) : docType === 'certificate' && selectedEntity.documents.certificate ? (\n                          <Image className=\"w-8 h-8 text-green-600\" />\n                        ) : docType === 'clearance' && selectedEntity.documents.clearance ? (\n                          <FileText className=\"w-8 h-8 text-green-600\" />\n                        ) : (\n                          <span className=\"text-red-600 text-sm\">Missing</span>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\n                <button\n                  onClick={() => handleReject(selectedEntity.id)}\n                  className=\"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\n                >\n                  Reject\n                </button>\n                <button\n                  onClick={() => handleApprove(selectedEntity.id)}\n                  className=\"px-6 py-2 text-white rounded-lg hover:opacity-90 transition-opacity\"\n                  style={{ backgroundColor: '#05f51d' }}\n                >\n                  Approve\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Document Preview Modal */}\n      {viewingDocument && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-60 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200 flex justify-between items-center\">\n              <h3 className=\"text-xl font-semibold\" style={{ color: '#19034d' }}>\n                {viewingDocument.replace('-', ' ').toUpperCase()}\n              </h3>\n              \n              <button onClick={() => {setViewingDocument(null);  setShowModal(true);}} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"w-full h-96 bg-gray-100 rounded-lg flex items-center justify-center\">\n                <div className=\"text-center\">\n                  <FileText className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n                  <p className=\"text-gray-600\">Document Preview</p>\n                  <p className=\"text-sm text-gray-500\">({viewingDocument})</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Verification;\n",
    "c:\\Users\\LocalAdmin\\Desktop\\Nexora\\backend\\service-pp-backend\\models\\User.js": "const mongoose = require('mongoose');\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  name: { type: String, required: true },\r\n  email: { type: String, required: true, unique: true },\r\n  contactNumber: { type: String, required: true },\r\n  cnicNumber: { type: String, required: true },\r\n  profilePhoto: { type: String },\r\n  cnicFront: { type: String },\r\n  cnicBack: { type: String },\r\n  criminalClearance: { type: String },\r\n  // This is where skills are stored as an array of objects\r\n  skills: [{\r\n    category: { type: String },\r\n    subcategories: [{ type: String }]\r\n  }],\r\n  createdAt: { type: Date, default: Date.now }\r\n});\r\n\r\nmodule.exports = mongoose.model('User', UserSchema);"
  }
}